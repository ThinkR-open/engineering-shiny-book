\usepackage{booktabs}
\lstset{
  breaklines=true
}