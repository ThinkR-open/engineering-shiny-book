<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 9 Using Golem | Building Big Shiny Apps - A Workflow</title>
  <meta name="description" content="Chapter 9 Using Golem | Building Big Shiny Apps - A Workflow">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 9 Using Golem | Building Big Shiny Apps - A Workflow" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 9 Using Golem | Building Big Shiny Apps - A Workflow" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Using Golem | Building Big Shiny Apps - A Workflow" />
  
  <meta name="twitter:description" content="Chapter 9 Using Golem | Building Big Shiny Apps - A Workflow" />
  

<meta name="author" content="Colin Fay">


<meta name="date" content="2019-04-08">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="step-deploy.html">
<link rel="next" href="proto.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Building Big Shiny Apps - A Workflow</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Disclaimer</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i><b>1.2</b> Book structure</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#wanna-help"><i class="fa fa-check"></i><b>1.3</b> Wanna help?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i><b>1.4</b> Other resources</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#getting-started-with-shiny"><i class="fa fa-check"></i><b>1.4.1</b> Getting started with Shiny</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#shiny-into-production"><i class="fa fa-check"></i><b>1.4.2</b> Shiny into production</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Building Shiny Apps</b></span></li>
<li class="chapter" data-level="2" data-path="bigshinyapp.html"><a href="bigshinyapp.html"><i class="fa fa-check"></i><b>2</b> About Big Shiny Apps</a><ul>
<li class="chapter" data-level="2.1" data-path="bigshinyapp.html"><a href="bigshinyapp.html#whats-a-big-shiny-app"><i class="fa fa-check"></i><b>2.1</b> What’s a big Shiny App?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="challenges.html"><a href="challenges.html"><i class="fa fa-check"></i><b>3</b> Challenges</a><ul>
<li class="chapter" data-level="3.1" data-path="challenges.html"><a href="challenges.html#designing-the-ui"><i class="fa fa-check"></i><b>3.1</b> Designing the UI</a></li>
<li class="chapter" data-level="3.2" data-path="challenges.html"><a href="challenges.html#working-as-a-team"><i class="fa fa-check"></i><b>3.2</b> Working as a team</a><ul>
<li class="chapter" data-level="3.2.1" data-path="challenges.html"><a href="challenges.html#from-the-tools-point-of-view"><i class="fa fa-check"></i><b>3.2.1</b> From the tools point of view:</a></li>
<li class="chapter" data-level="3.2.2" data-path="challenges.html"><a href="challenges.html#from-the-organisational-point-of-view"><i class="fa fa-check"></i><b>3.2.2</b> From the organisational point of view</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="challenges.html"><a href="challenges.html#making-the-app-production-ready"><i class="fa fa-check"></i><b>3.3</b> Making the app production ready</a><ul>
<li class="chapter" data-level="3.3.1" data-path="challenges.html"><a href="challenges.html#scaling"><i class="fa fa-check"></i><b>3.3.1</b> Scaling</a></li>
<li class="chapter" data-level="3.3.2" data-path="challenges.html"><a href="challenges.html#maintaining"><i class="fa fa-check"></i><b>3.3.2</b> Maintaining</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Step by step</b></span></li>
<li class="chapter" data-level="4" data-path="step-design.html"><a href="step-design.html"><i class="fa fa-check"></i><b>4</b> Step 1: Designing</a></li>
<li class="chapter" data-level="5" data-path="step-protopype.html"><a href="step-protopype.html"><i class="fa fa-check"></i><b>5</b> Step 2: Prototype</a></li>
<li class="chapter" data-level="6" data-path="step-build.html"><a href="step-build.html"><i class="fa fa-check"></i><b>6</b> Step 3: Build</a></li>
<li class="chapter" data-level="7" data-path="step-secure.html"><a href="step-secure.html"><i class="fa fa-check"></i><b>7</b> Step 4: Secure</a></li>
<li class="chapter" data-level="8" data-path="step-deploy.html"><a href="step-deploy.html"><i class="fa fa-check"></i><b>8</b> Step 5: Deploy</a></li>
<li class="part"><span><b>III Tools</b></span></li>
<li class="chapter" data-level="9" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>9</b> Using Golem</a><ul>
<li class="chapter" data-level="9.1" data-path="golem.html"><a href="golem.html#getting-started-with-golem"><i class="fa fa-check"></i><b>9.1</b> Getting started with <code>{golem}</code></a><ul>
<li class="chapter" data-level="9.1.1" data-path="golem.html"><a href="golem.html#create-a-package"><i class="fa fa-check"></i><b>9.1.1</b> Create a package</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="golem.html"><a href="golem.html#dev01_start.r"><i class="fa fa-check"></i><b>9.2</b> <code>dev/01_start.R</code></a><ul>
<li class="chapter" data-level="9.2.1" data-path="golem.html"><a href="golem.html#fill-the-desc"><i class="fa fa-check"></i><b>9.2.1</b> Fill the DESC</a></li>
<li class="chapter" data-level="9.2.2" data-path="golem.html"><a href="golem.html#set-common-files"><i class="fa fa-check"></i><b>9.2.2</b> Set common Files</a></li>
<li class="chapter" data-level="9.2.3" data-path="golem.html"><a href="golem.html#add-a-data-raw-folder"><i class="fa fa-check"></i><b>9.2.3</b> Add a data-raw folder</a></li>
<li class="chapter" data-level="9.2.4" data-path="golem.html"><a href="golem.html#init-tests"><i class="fa fa-check"></i><b>9.2.4</b> Init Tests</a></li>
<li class="chapter" data-level="9.2.5" data-path="golem.html"><a href="golem.html#use-recommended-package"><i class="fa fa-check"></i><b>9.2.5</b> Use Recommended Package</a></li>
<li class="chapter" data-level="9.2.6" data-path="golem.html"><a href="golem.html#add-various-tools"><i class="fa fa-check"></i><b>9.2.6</b> Add various tools</a></li>
<li class="chapter" data-level="9.2.7" data-path="golem.html"><a href="golem.html#if-you-want-to-change-the-default-favicon"><i class="fa fa-check"></i><b>9.2.7</b> If you want to change the default favicon</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="golem.html"><a href="golem.html#day-to-day-dev-with-golem"><i class="fa fa-check"></i><b>9.3</b> Day to Day Dev with <code>{golem}</code></a></li>
<li class="chapter" data-level="9.4" data-path="golem.html"><a href="golem.html#launching-the-app"><i class="fa fa-check"></i><b>9.4</b> Launching the app</a></li>
<li class="chapter" data-level="9.5" data-path="golem.html"><a href="golem.html#dev02_dev.r"><i class="fa fa-check"></i><b>9.5</b> <code>dev/02_dev.R</code></a><ul>
<li class="chapter" data-level="9.5.1" data-path="golem.html"><a href="golem.html#add-modules"><i class="fa fa-check"></i><b>9.5.1</b> Add modules</a></li>
<li class="chapter" data-level="9.5.2" data-path="golem.html"><a href="golem.html#add-dependencies"><i class="fa fa-check"></i><b>9.5.2</b> Add dependencies</a></li>
<li class="chapter" data-level="9.5.3" data-path="golem.html"><a href="golem.html#add-tests"><i class="fa fa-check"></i><b>9.5.3</b> Add tests</a></li>
<li class="chapter" data-level="9.5.4" data-path="golem.html"><a href="golem.html#add-a-browser-button"><i class="fa fa-check"></i><b>9.5.4</b> Add a browser button</a></li>
<li class="chapter" data-level="9.5.5" data-path="golem.html"><a href="golem.html#add-external-files"><i class="fa fa-check"></i><b>9.5.5</b> Add external files</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="golem.html"><a href="golem.html#adding-these-external-resources-to-your-app"><i class="fa fa-check"></i><b>9.6</b> Adding these external resources to your app</a></li>
<li class="chapter" data-level="9.7" data-path="golem.html"><a href="golem.html#documentation"><i class="fa fa-check"></i><b>9.7</b> Documentation</a><ul>
<li class="chapter" data-level="9.7.1" data-path="golem.html"><a href="golem.html#vignette"><i class="fa fa-check"></i><b>9.7.1</b> Vignette</a></li>
<li class="chapter" data-level="9.7.2" data-path="golem.html"><a href="golem.html#code-coverage"><i class="fa fa-check"></i><b>9.7.2</b> Code coverage</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="golem.html"><a href="golem.html#using-golem-dev-functions"><i class="fa fa-check"></i><b>9.8</b> Using <code>{golem}</code> dev functions</a></li>
<li class="chapter" data-level="9.9" data-path="golem.html"><a href="golem.html#deploying-apps-with-golem"><i class="fa fa-check"></i><b>9.9</b> Deploying Apps with <code>{golem}</code></a><ul>
<li class="chapter" data-level="9.9.1" data-path="golem.html"><a href="golem.html#rstudio-connect"><i class="fa fa-check"></i><b>9.9.1</b> RStudio Connect</a></li>
<li class="chapter" data-level="9.9.2" data-path="golem.html"><a href="golem.html#docker"><i class="fa fa-check"></i><b>9.9.2</b> Docker</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="golem.html"><a href="golem.html#using-golem-js-functions"><i class="fa fa-check"></i><b>9.10</b> Using <code>{golem}</code> js functions</a><ul>
<li class="chapter" data-level="9.10.1" data-path="golem.html"><a href="golem.html#golemjs"><i class="fa fa-check"></i><b>9.10.1</b> <code>golem::js()</code></a></li>
<li class="chapter" data-level="9.10.2" data-path="golem.html"><a href="golem.html#about-jquery-selectors"><i class="fa fa-check"></i><b>9.10.2</b> About jQuery selectors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="proto.html"><a href="proto.html"><i class="fa fa-check"></i><b>10</b> Prototyping</a><ul>
<li class="chapter" data-level="10.1" data-path="proto.html"><a href="proto.html#shinipsum"><i class="fa fa-check"></i><b>10.1</b> {shinipsum}</a></li>
<li class="chapter" data-level="10.2" data-path="proto.html"><a href="proto.html#fakir"><i class="fa fa-check"></i><b>10.2</b> {fakir}</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tooling.html"><a href="tooling.html"><i class="fa fa-check"></i><b>11</b> Other tools</a><ul>
<li class="chapter" data-level="11.1" data-path="tooling.html"><a href="tooling.html#package"><i class="fa fa-check"></i><b>11.1</b> Package</a></li>
<li class="chapter" data-level="11.2" data-path="tooling.html"><a href="tooling.html#git"><i class="fa fa-check"></i><b>11.2</b> Git</a></li>
<li class="chapter" data-level="11.3" data-path="tooling.html"><a href="tooling.html#shiny-modules"><i class="fa fa-check"></i><b>11.3</b> Shiny modules</a></li>
<li class="chapter" data-level="11.4" data-path="tooling.html"><a href="tooling.html#ci-and-testing"><i class="fa fa-check"></i><b>11.4</b> CI and testing</a></li>
</ul></li>
<li class="part"><span><b>IV Optimizing</b></span></li>
<li class="chapter" data-level="12" data-path="optim-caveat.html"><a href="optim-caveat.html"><i class="fa fa-check"></i><b>12</b> Common Application Caveats</a></li>
<li class="chapter" data-level="13" data-path="optim-r.html"><a href="optim-r.html"><i class="fa fa-check"></i><b>13</b> Optimizing Shiny Code</a></li>
<li class="chapter" data-level="14" data-path="optim-js.html"><a href="optim-js.html"><i class="fa fa-check"></i><b>14</b> Using JavaSript</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Building Big Shiny Apps - A Workflow</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="golem" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Using Golem</h1>
<p>Ok, that’s a lot of things to process. Is there a tool that can help us simplify this workflow? Of course there is, and it’s called <code>{golem}</code>.</p>
<p>It can be found at <a href="https://github.com/ThinkR-open/golem" class="uri">https://github.com/ThinkR-open/golem</a></p>
<p>For now, <code>{golem}</code> can only be found on GitHub (but it should be on CRAN soon), so you have to install it with:</p>
<pre class="sourceCode r"><code class="sourceCode r">remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;Thinkr-open/golemn&quot;</span>)</code></pre>
<p><code>{golem}</code> is an R package that implements an opinionated framework for building production-ready Shiny apps. It all starts with an RStudio project, which contains a predefined setup for building your app. The idea is that with <code>{golem}</code>, you don’t have to focus on the foundation of your app, and can spend your time thinking about what you want to do, not about how to do it. It’s built on top of the working process we’ve developed at ThinkR, and tries to gather in one place the functions and tools we’ve created for building applications designed for production.</p>
<div id="getting-started-with-golem" class="section level2">
<h2><span class="header-section-number">9.1</span> Getting started with <code>{golem}</code></h2>
<p>Note before using <code>{golem}</code>:</p>
<ul>
<li><p>A <code>{golem}</code> app is contained inside a package, so knowing how to build a package is highly recommended.</p></li>
<li><p>A <code>{golem}</code> app works better if you are working with <code>shiny modules</code>, so knowing how modules work is heavily recommended.</p></li>
</ul>
<p>In the rest of the Vignettes, we’ll assume you’re working in RStudio.</p>
<div id="create-a-package" class="section level3">
<h3><span class="header-section-number">9.1.1</span> Create a package</h3>
<p>Once the package is installed, you can got to File &gt; New Project… in RStudio, and choose “Package for Shiny App Using golem” input.</p>
<p>If you want to do it through command line, you can use:</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">create_shiny_template</span>(<span class="dt">path =</span> <span class="st">&quot;path/to/package&quot;</span>)</code></pre>
<p>This command allows you to create “illegally-named” package (for example, <code>1234</code>) by passing the <code>check_name</code> argument to <code>FALSE</code>. Note that this is not recommanded and <strong>should only be done if you know what you are doing</strong>.</p>
<p>Once you’ve got that, a new RStudio project will be launched. Here is the structure of this project:</p>
<pre><code>DESCRIPTION               
¦--dev/          
  ¦--01_start.R           
  ¦--02_dev.R           
  ¦--03_deploy.R           
  ¦--run_dev.R
¦--inst/ 
  ¦--app                
    ¦--server.R       
    ¦--ui.R           
    ¦--www/          
      ¦--favicon.ico
¦--man/ 
    ¦--run_app.Rd      
NAMESPACE
myapp.Rproj
¦--R/ 
  ¦--app_server.R       
  ¦--app_ui.R           
  ¦--run_app.R      </code></pre>
<p>]</p>
<p>If you’re already familiar with R pacakges, most of these files will appear very familiar to you. That’s because a <code>{golem}</code> app IS a package.</p>
<ul>
<li><p><code>DESCRIPTION</code> &amp; <code>NAMESPACE</code>: Package meta-data.</p></li>
<li><p><code>dev/</code>: Scripts that will be used along the process of developping your app.</p></li>
<li><p><code>inst/app</code>: You’ll add external dependencies in <code>www</code> (images, css, etc). Don’t touch <code>app_ui</code> and <code>app_server</code>.</p></li>
<li><p><code>man</code>: Package doc, to be generated by R.</p></li>
<li><p><code>myapp.Rproj</code>: RStudio project.</p></li>
<li><p><code>R/app_server.R</code>, <code>R/app_ui.R</code>: Top level UI and server elements.</p></li>
<li><p><code>R/run_app.R</code>: a function to configure and launch the application.</p></li>
</ul>
</div>
</div>
<div id="dev01_start.r" class="section level2">
<h2><span class="header-section-number">9.2</span> <code>dev/01_start.R</code></h2>
<p>Once you’ve created your project, the first file that opens is <code>dev/01_start.R</code>. This file contains a series of commands to run once, at the start of the project.</p>
<div id="fill-the-desc" class="section level3">
<h3><span class="header-section-number">9.2.1</span> Fill the DESC</h3>
<p>First, fill the DESCRIPTION by adding information about the package that will contain your app:</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">fill_desc</span>(
  <span class="dt">pkg_name =</span> <span class="st">&quot;shinyexample&quot;</span>, <span class="co"># The Name of the package containing the App </span>
  <span class="dt">pkg_title =</span> , <span class="co"># The Title of the package containing the App </span>
  <span class="dt">pkg_description =</span> , <span class="co"># The Description of the package containing the App </span>
  <span class="dt">author_first_name =</span> , <span class="co"># Your First Name</span>
  <span class="dt">author_last_name =</span> ,  <span class="co"># Your Last Name</span>
  <span class="dt">author_email =</span> ,      <span class="co"># Your Email</span>
  <span class="dt">repo_url =</span> <span class="ot">NULL</span>)      <span class="co"># The (optional) URL of the GitHub Repo</span></code></pre>
</div>
<div id="set-common-files" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Set common Files</h3>
<p>If you want to use the MIT licence, README, code of conduct, lifecycle badge, and news</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_mit_license</span>(<span class="dt">name =</span> <span class="st">&quot;Your Name&quot;</span>)  <span class="co"># You can set another licence here</span>
usethis<span class="op">::</span><span class="kw">use_readme_rmd</span>()
usethis<span class="op">::</span><span class="kw">use_code_of_conduct</span>()
usethis<span class="op">::</span><span class="kw">use_lifecycle_badge</span>(<span class="st">&quot;Experimental&quot;</span>)
usethis<span class="op">::</span><span class="kw">use_news_md</span>()</code></pre>
</div>
<div id="add-a-data-raw-folder" class="section level3">
<h3><span class="header-section-number">9.2.3</span> Add a data-raw folder</h3>
<p>If you have data in your package</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_data_raw</span>()</code></pre>
</div>
<div id="init-tests" class="section level3">
<h3><span class="header-section-number">9.2.4</span> Init Tests</h3>
<p>Create a template for tests:</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">use_recommended_tests</span>()</code></pre>
</div>
<div id="use-recommended-package" class="section level3">
<h3><span class="header-section-number">9.2.5</span> Use Recommended Package</h3>
<p>This will add “shiny”, “DT”, “attempt”, “glue”, “htmltools”, and “golem” as a dependecy to your package.</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">use_recommended_dep</span>(<span class="st">&quot;&quot;</span>)</code></pre>
</div>
<div id="add-various-tools" class="section level3">
<h3><span class="header-section-number">9.2.6</span> Add various tools</h3>
<p>These two functions add a file with various functions that can be used along the process of building your app.</p>
<p>See each file in details for a description of the functions.</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">use_utils_ui</span>()
golem<span class="op">::</span><span class="kw">use_utils_server</span>()</code></pre>
</div>
<div id="if-you-want-to-change-the-default-favicon" class="section level3">
<h3><span class="header-section-number">9.2.7</span> If you want to change the default favicon</h3>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">use_favicon</span>( <span class="dt">path =</span> <span class="st">&quot;path/to/favicon&quot;</span>)</code></pre>
<p>You’re now set! You’ve successfully initiated the project and can go to dev/02_dev.R.</p>
<pre class="sourceCode r"><code class="sourceCode r">rstudioapi<span class="op">::</span><span class="kw">navigateToFile</span>(<span class="st">&quot;dev/02_dev.R&quot;</span>)</code></pre>
</div>
</div>
<div id="day-to-day-dev-with-golem" class="section level2">
<h2><span class="header-section-number">9.3</span> Day to Day Dev with <code>{golem}</code></h2>
<p>Now that you’re all set with your project init, time to move to development :)</p>
<p>App development should happen through the <code>dev/02_dev.R</code> file, which contains common commands for developping.</p>
</div>
<div id="launching-the-app" class="section level2">
<h2><span class="header-section-number">9.4</span> Launching the app</h2>
<p>To run the app, go to the <code>dev/run_dev.R</code> file, and run the all thing.</p>
</div>
<div id="dev02_dev.r" class="section level2">
<h2><span class="header-section-number">9.5</span> <code>dev/02_dev.R</code></h2>
<div id="add-modules" class="section level3">
<h3><span class="header-section-number">9.5.1</span> Add modules</h3>
<p>The <code>golem::add_module()</code> functions creates a module in the <code>R</code> folder. The file and the modules will be named after the <code>name</code> parameter, by adding <code>mod_</code> to the R file, and <code>mod_*_ui</code> and <code>mod_*_server</code> to the UI and server functions.</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">add_module</span>(<span class="dt">name =</span> <span class="st">&quot;my_first_module&quot;</span>) <span class="co"># Name of the module</span></code></pre>
<p>The new file will contain:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># mod_UI</span>
mod_my_first_module_ui &lt;-<span class="st"> </span><span class="cf">function</span>(id){
  ns &lt;-<span class="st"> </span><span class="kw">NS</span>(id)
  <span class="kw">tagList</span>(
  
  )
}

mod_my_first_module_server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){
  ns &lt;-<span class="st"> </span>session<span class="op">$</span>ns
}
    
<span class="co">## To be copied in the UI</span>
<span class="co"># mod_my_first_module_ui(&quot;my_first_module_1&quot;)</span>
    
<span class="co">## To be copied in the server</span>
<span class="co"># callModule(mod_my_first_module_server, &quot;my_first_module_1&quot;)</span></code></pre>
<p>In order not to make errors when putting these into your app, the end of the file will contain code that has to be copied and pasted inside your UI and server functions.</p>
</div>
<div id="add-dependencies" class="section level3">
<h3><span class="header-section-number">9.5.2</span> Add dependencies</h3>
<p>To be called each time you need a new package as a dependency:</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_package</span>(<span class="st">&quot;pkg&quot;</span>)</code></pre>
</div>
<div id="add-tests" class="section level3">
<h3><span class="header-section-number">9.5.3</span> Add tests</h3>
<p>Add more tests to your application:</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_test</span>(<span class="st">&quot;app&quot;</span>)</code></pre>
</div>
<div id="add-a-browser-button" class="section level3">
<h3><span class="header-section-number">9.5.4</span> Add a browser button</h3>
<p>Learn more about this: <a href="https://rtask.thinkr.fr/blog/a-little-trick-for-debugging-shiny/" class="uri">https://rtask.thinkr.fr/blog/a-little-trick-for-debugging-shiny/</a></p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">browser_button</span>()</code></pre>
</div>
<div id="add-external-files" class="section level3">
<h3><span class="header-section-number">9.5.5</span> Add external files</h3>
<p>These functions create external dependencies (JavaScript and CSS). <code>add_js_file()</code> creates a simple JavaScript file, while <code>add_js_handler()</code> adds a file with a skeleton for shiny custom handlers.</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">add_js_file</span>(<span class="st">&quot;script&quot;</span>)
golem<span class="op">::</span><span class="kw">add_js_handler</span>(<span class="st">&quot;script&quot;</span>)
golem<span class="op">::</span><span class="kw">add_css_file</span>(<span class="st">&quot;custom&quot;</span>)</code></pre>
</div>
</div>
<div id="adding-these-external-resources-to-your-app" class="section level2">
<h2><span class="header-section-number">9.6</span> Adding these external resources to your app</h2>
<p>You can add any external resource (JS, css) into <code>inst/app/www</code>.</p>
<p>Then, You’ll need to point to these external resources in <code>golem_add_external_resources()</code>. For example, if you’ve created a CSS file with <code>golem::add_css_file(&quot;custom&quot;)</code>, you can add the file with:</p>
<pre class="sourceCode r"><code class="sourceCode r">tags<span class="op">$</span><span class="kw">link</span>(<span class="dt">rel=</span><span class="st">&quot;stylesheet&quot;</span>, <span class="dt">type=</span><span class="st">&quot;text/css&quot;</span>, <span class="dt">href=</span><span class="st">&quot;www/custom.css&quot;</span>)</code></pre>
<p>Also, you can list here the use of other packages, for example <code>useShinyalert()</code> from the <code>{shinyalert}</code> package.</p>
<p>Note: we’ve chosen to leave it “raw”, in the sense that there is a <code>addResourcePath</code> and a <code>tags$head</code>. If you’re comfortable with <code>{htmltools}</code>, you can build a <code>htmltools::htmlDependency</code>.</p>
</div>
<div id="documentation" class="section level2">
<h2><span class="header-section-number">9.7</span> Documentation</h2>
<div id="vignette" class="section level3">
<h3><span class="header-section-number">9.7.1</span> Vignette</h3>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_vignette</span>(<span class="st">&quot;shinyexample&quot;</span>)
devtools<span class="op">::</span><span class="kw">build_vignettes</span>()</code></pre>
</div>
<div id="code-coverage" class="section level3">
<h3><span class="header-section-number">9.7.2</span> Code coverage</h3>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_travis</span>()
usethis<span class="op">::</span><span class="kw">use_appveyor</span>()
usethis<span class="op">::</span><span class="kw">use_coverage</span>()</code></pre>
</div>
</div>
<div id="using-golem-dev-functions" class="section level2">
<h2><span class="header-section-number">9.8</span> Using <code>{golem}</code> dev functions</h2>
<p>There’s a series of tools to make your app behave differently whether it’s in dev or prod mode. Notably, the <code>app_prod()</code> and <code>app_dev()</code> function tests for <code>options( &quot;golem.app.prod&quot;)</code> (or return TRUE if this option doesn’t exist).</p>
<p>Setting this options at the beginning of your dev process allows to make your app behave in a specific way when you are in dev mode. For example, printing message to the console with <code>cat_dev()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>( <span class="st">&quot;golem.app.prod&quot;</span> =<span class="st"> </span><span class="ot">TRUE</span>)
golem<span class="op">::</span><span class="kw">cat_dev</span>(<span class="st">&quot;hey</span><span class="ch">\n</span><span class="st">&quot;</span>)
<span class="kw">options</span>( <span class="st">&quot;golem.app.prod&quot;</span> =<span class="st"> </span><span class="ot">FALSE</span>)
golem<span class="op">::</span><span class="kw">cat_dev</span>(<span class="st">&quot;hey</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<pre><code>## hey</code></pre>
<p>You can then make any function being “dev-dependant” with the <code>make_dev()</code> function:</p>
<pre class="sourceCode r"><code class="sourceCode r">log_dev &lt;-<span class="st"> </span>golem<span class="op">::</span><span class="kw">make_dev</span>(log)
<span class="kw">log_dev</span>(<span class="dv">10</span>)</code></pre>
<pre><code>## [1] 2.302585</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>( <span class="st">&quot;golem.app.prod&quot;</span> =<span class="st"> </span><span class="ot">TRUE</span>)
<span class="kw">log_dev</span>(<span class="dv">10</span>)</code></pre>
</div>
<div id="deploying-apps-with-golem" class="section level2">
<h2><span class="header-section-number">9.9</span> Deploying Apps with <code>{golem}</code></h2>
<p>The <code>dev/03_deploy.R</code> file contains function for deploying on various plateforms.</p>
<div id="rstudio-connect" class="section level3">
<h3><span class="header-section-number">9.9.1</span> RStudio Connect</h3>
<p>To create an <code>app.R</code> ready to be deployed on RStudio Connect, run:</p>
<pre class="sourceCode r"><code class="sourceCode r">golem<span class="op">::</span><span class="kw">add_rconnect_file</span>()</code></pre>
</div>
<div id="docker" class="section level3">
<h3><span class="header-section-number">9.9.2</span> Docker</h3>
<p>You can create a generic Dockerfile, or one which is plateform specific (for now, only ShinyProxy and Heroku are supported).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># If you want to deploy via a generic Dockerfile</span>
golem<span class="op">::</span><span class="kw">add_dockerfile</span>()

<span class="co"># If you want to deploy to ShinyProxy</span>
golem<span class="op">::</span><span class="kw">add_shinyproxy_dockerfile</span>()

<span class="co"># If you want to deploy to Heroku</span>
golem<span class="op">::</span><span class="kw">add_heroku_dockerfile</span>()</code></pre>
</div>
</div>
<div id="using-golem-js-functions" class="section level2">
<h2><span class="header-section-number">9.10</span> Using <code>{golem}</code> js functions</h2>
<p><code>{golem}</code> comes with a series of JavaScript functions that you can call from the server. These functions are added by default with <code>golem::js()</code> in <code>app_ui</code>.</p>
<p>Then they arer called with <code>session$sendCustomMessage(&quot;fonction&quot;, &quot;ui_element&quot;)</code>.</p>
<p>This <code>ui_element</code> define the UI element to interact with. It can be a full jQuery selector, an id or a class.</p>
<div id="golemjs" class="section level3">
<h3><span class="header-section-number">9.10.1</span> <code>golem::js()</code></h3>
<ul>
<li><code>showid</code> &amp; <code>hideid</code>, <code>showclass</code> &amp; <code>hideclass</code> show and hide elements through their id or class.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">session<span class="op">$</span><span class="kw">sendCustomMessage</span>(<span class="st">&quot;showid&quot;</span>, <span class="kw">ns</span>(<span class="st">&quot;plot&quot;</span>))</code></pre>
<ul>
<li><code>showhref</code> &amp; <code>hidehref</code> hide and show a link by trying to match the <code>href</code> content.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">session<span class="op">$</span><span class="kw">sendCustomMessage</span>(<span class="st">&quot;showhref&quot;</span>, <span class="st">&quot;panel2&quot;</span>)</code></pre>
<ul>
<li><p><code>clickon</code> click on the element. You have to use the full jQuery selector.</p></li>
<li><p><code>show</code> &amp; <code>hide</code> show and hide elements, using the full jQuery selector.</p></li>
</ul>
</div>
<div id="about-jquery-selectors" class="section level3">
<h3><span class="header-section-number">9.10.2</span> About jQuery selectors</h3>
<ul>
<li><p><code>#plop</code>: the element with the id <code>plop</code></p></li>
<li><p><code>.pouet</code>: elements of class <code>pouet</code></p></li>
<li><p><code>&quot;button:contains('this')&quot;</code>: buttons with a text containing <code>'this'</code></p></li>
</ul>
<p>Note that in html, tags contains attributes. For example:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;a</span><span class="ot"> href</span> <span class="ot">=</span> <span class="st">&quot;https://thinkr.fr&quot;</span><span class="ot"> data-value</span> <span class="ot">=</span> <span class="st">&quot;panel2&quot;</span><span class="kw">&gt;</span>ThinkR<span class="kw">&lt;/a&gt;</span></code></pre>
<p>contains <code>href</code> &amp; <code>data-value</code>. You can refer to these attributes with <code>[]</code> after the tag name.</p>
<ul>
<li><p><code>a[href = &quot;https://thinkr.fr&quot;]</code>: link with <code>href</code> being <code>https://thinkr.fr</code></p></li>
<li><p><code>a[data-value=&quot;panel2&quot;]</code>: link with <code>data-value</code> being <code>&quot;panel2&quot;</code></p></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="step-deploy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="proto.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
