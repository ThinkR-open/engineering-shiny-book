<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 Don’t Rush into Coding | Engineering Production-Grade Shiny Apps</title>
<meta name="author" content="Colin Fay">
<meta name="author" content="Sébastien Rochette">
<meta name="author" content="Vincent Guyader">
<meta name="author" content="Cervan Girard">
<meta name="description" content="7.1 Designing before coding  You have to believe that software design is a craft worth all the intelligence, creativity, and passion you can muster. Otherwise you will not look past the easy,...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 7 Don’t Rush into Coding | Engineering Production-Grade Shiny Apps">
<meta property="og:type" content="book">
<meta property="og:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg">
<meta property="og:description" content="7.1 Designing before coding  You have to believe that software design is a craft worth all the intelligence, creativity, and passion you can muster. Otherwise you will not look past the easy,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 Don’t Rush into Coding | Engineering Production-Grade Shiny Apps">
<meta name="twitter:description" content="7.1 Designing before coding  You have to believe that software design is a craft worth all the intelligence, creativity, and passion you can muster. Otherwise you will not look past the easy,...">
<meta name="twitter:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap/bootstrap.bundle.min.js"></script><script src="libs/bs3compat/transition.js"></script><script src="libs/bs3compat/tabs.js"></script><script src="libs/bs3compat/bs3compat.js"></script><link href="libs/bs4_book/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book/bs4_book.js"></script><script src="libs/accessible-code-block/empty-anchor.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-149994171-1');
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/style_gitbook.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Engineering Production-Grade Shiny Apps</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li><a class="" href="application-presentation.html">Application presentation</a></li>
<li class="book-part">Building Successful {shiny} Apps</li>
<li><a class="" href="successful-shiny-app.html"><span class="header-section-number">1</span> About Successful {shiny} Apps</a></li>
<li><a class="" href="planning-ahead.html"><span class="header-section-number">2</span> Planning Ahead</a></li>
<li><a class="" href="structuring-project.html"><span class="header-section-number">3</span> Structuring Your Project</a></li>
<li><a class="" href="golem.html"><span class="header-section-number">4</span> Introduction to {golem}</a></li>
<li><a class="" href="workflow.html"><span class="header-section-number">5</span> The Workflow</a></li>
<li class="book-part">Step 1: Design</li>
<li><a class="" href="ux-matters.html"><span class="header-section-number">6</span> UX Matters</a></li>
<li><a class="active" href="dont-rush-into-coding.html"><span class="header-section-number">7</span> Don’t Rush into Coding</a></li>
<li class="book-part">Step 2: Prototype</li>
<li><a class="" href="setting-up-for-success.html"><span class="header-section-number">8</span> Setting up for Success with {golem}</a></li>
<li><a class="" href="building-ispum-app.html"><span class="header-section-number">9</span> Building an “ipsum-app”</a></li>
<li class="book-part">Step 3: Build</li>
<li><a class="" href="build-app-golem.html"><span class="header-section-number">10</span> Building the App with {golem}</a></li>
<li class="book-part">Step 4: Strengthen</li>
<li><a class="" href="build-yourself-safety-net.html"><span class="header-section-number">11</span> Build Yourself a Safety Net</a></li>
<li><a class="" href="version-control.html"><span class="header-section-number">12</span> Version Control</a></li>
<li class="book-part">Step 5: Deploy</li>
<li><a class="" href="deploy.html"><span class="header-section-number">13</span> Deploy Your Application</a></li>
<li class="book-part">Optimizing</li>
<li><a class="" href="need-for-optimization.html"><span class="header-section-number">14</span> The Need for Optimization</a></li>
<li><a class="" href="common-app-caveats.html"><span class="header-section-number">15</span> Common Application Caveats</a></li>
<li><a class="" href="optimizing-shiny-code.html"><span class="header-section-number">16</span> Optimizing {shiny} Code</a></li>
<li><a class="" href="using-javascript.html"><span class="header-section-number">17</span> Using JavaScript</a></li>
<li><a class="" href="css.html"><span class="header-section-number">18</span> A Gentle Introduction to CSS</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="appendix-a---use-case-building-an-app-from-start-to-finish.html">Appendix A - Use Case: Building an App from Start to Finish</a></li>
<li><a class="" href="appendix-b---session-info.html">Appendix B - Session Info</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/ThinkR-open/engineering-shiny-book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="dont-rush-into-coding" class="section level1">
<h1>
<span class="header-section-number">7</span> Don’t Rush into Coding<a class="anchor" aria-label="anchor" href="#dont-rush-into-coding"><i class="fas fa-link"></i></a>
</h1>
<div id="designing-before-coding" class="section level2">
<h2>
<span class="header-section-number">7.1</span> Designing before coding<a class="anchor" aria-label="anchor" href="#designing-before-coding"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>You have to believe that software design is a craft worth all the intelligence, creativity, and passion you can muster.
Otherwise you will not look past the easy, stereotyped ways of approaching design and implementation; <strong>you will rush into coding when you should be thinking</strong>.
You’ll carelessly complicate when you should be relentlessly simplifying—and you’ll wonder why your code bloats and debugging is so hard.<br></p>
<p><em>The Art of UNIX Programming</em> <span class="citation">(Raymond <a href="references.html#ref-ericraymond2003" role="doc-biblioref">2003</a>)</span> (Our bold.)</p>
</blockquote>
<div id="the-urge-to-code" class="section level3">
<h3>
<span class="header-section-number">7.1.1</span> The urge to code<a class="anchor" aria-label="anchor" href="#the-urge-to-code"><i class="fas fa-link"></i></a>
</h3>
<p>At the moment you receive the specifications for your app, it is tempting to rush into coding.
And that is perfectly normal: we’re R developers because we love building software, so as soon as a problem emerges, our brain starts thinking about technical implementation, packages, pieces of code, and all these things that we love to do when we are building an application.</p>
<p>But <strong>rushing into coding from the very beginning is not the safest way to go</strong>.
Focusing on technical details from the very beginning can make you miss the big picture, be it for the whole app if you are in charge of the project, or for the piece of the whole app that you have been assigned.
Have you ever faced a situation in a coding project where you tell yourself “Oh, I wish I had realized this sooner, because now I need to refactor a lot of my code for this specific thing”?
Yes, we all have been in this situation: realizing too late that the thing we have implemented does not work with another feature we discover along the road.
And what about “Oh I wish I had realized sooner that this package existed before trying to implement my own functions to do that!”<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Given the dynamic of the R community, there is no way to completely avoid this: new packages are created and publish every day, so there is no way to be aware of everything.
But trying to assess what exists before jumping into coding will definitely save you some time in the long run.&lt;/p&gt;"><sup>34</sup></a>
Same thing: we’re jumping straight into solving a programming problem when someone else has open-sourced a solution to this very same problem.</p>
<p>Of course, implementing your own solution might be a good thing in specific cases: avoiding heavy dependencies, incompatible licensing, the joy of the intellectual challenge, but <strong>when building production software, it is safer to go for an existing solution if there is one and it fits in the project: existing packages/software that are widely used by the community and by the industry benefit from wider testing, wider documentation, and a larger audience if you need to ask questions</strong>.
And of course, it saves time, be it immediately or in the long run: re-using an existing solution allows you to save time re-implementing it, so you save time today, but it also prevents you from having to detect and correct bugs, saving you time tomorrow.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Of course, it is not an absolute rule: you might also inherit from the bug created by the open source solution.&lt;/p&gt;"><sup>35</sup></a></p>
<p>Note also that assessing that a dependency/technology is a good choice for an application is not an easy task: there is a difference between <em>thinking</em> something will be the good choice and <em>knowing</em> that this choice is the correct one.
Most of the time, when faced with a new technology, it makes sense to take some time to write a small prototype that tests the features we want to use.
This process of prototyping small applications to test features is made easier notably by using the <a href="https://github.com/Thinkr-open/shinipsum">shinipsum</a> package, which we will see in Chapter <a href="building-ispum-app.html#building-ispum-app">9</a>.</p>
<p>Before rushing into coding, take some time to conceptualize your application/modules on a piece of paper.
That will help you get the big picture of the piece of code you will be writing: what are the inputs, what are the outputs, what packages/services can you use inside your application, how will it fit in the rest of the project, and so on and so forth.</p>
</div>
<div id="knowing-where-to-search" class="section level3">
<h3>
<span class="header-section-number">7.1.2</span> Knowing where to search<a class="anchor" aria-label="anchor" href="#knowing-where-to-search"><i class="fas fa-link"></i></a>
</h3>
<p>Being a good developer is knowing where to search, and what to search for.
Here is a non-exhaustive list of places you can look if you are stuck/looking for existing packages.</p>
<div id="r-and-shiny" class="section level4 unnumbered">
<h4>R and <code>{shiny}</code><a class="anchor" aria-label="anchor" href="#r-and-shiny"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<a href="https://cran.r-project.org/web/views/WebTechnologies.html">CRAN Task View: Web Technologies and Services</a> and <a href="https://cran.r-project.org/web/views/Databases.html">CRAN Task View: Databases with R</a>, which will be useful for interacting with web technologies and databases.</li>
<li>
<a href="https://cloudyr.github.io/">The cloudyr project</a>, which focuses on cloud services and R.</li>
<li>
<a href="https://r-pkg.org/">METACRAN</a>, which is a search engine for R packages.</li>
<li>
<a href="https://github.com/search?q=language%3AR">GitHub search using <code>language:R</code></a>: When doing a search on GitHub, do not forget to add the language-specific tag.</li>
<li>
<a href="https://community.rstudio.com/c/shiny/8">RStudio Community</a> has a series of posts about <a href="http://shiny.rstudio.com">shiny</a>: questions, announcements, best practices, etc.</li>
</ul>
</div>
<div id="web" class="section level4 unnumbered">
<h4>Web<a class="anchor" aria-label="anchor" href="#web"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<a href="https://developer.mozilla.org/">Mozilla developer center</a> is one of the most comprehensive resource platforms when it comes to web technologies (HTML, CSS, and JavaScript)</li>
<li>
<a href="https://developers.google.com/">Google Developer Center</a> also has a series of resources that can be helpful when it comes to web technologies.</li>
<li>
<a href="https://www.freecodecamp.org/">FreeCodeCamp</a> contains more than 2000 hours of free courses about web technologies, plus a blog and forum.</li>
</ul>
</div>
</div>
<div id="about-concept-map" class="section level3">
<h3>
<span class="header-section-number">7.1.3</span> About concept map<a class="anchor" aria-label="anchor" href="#about-concept-map"><i class="fas fa-link"></i></a>
</h3>
<p>Using a concept map to think about your app can be a valuable method to help you grasp the big picture of your application.</p>
<p>Concept maps are a widely used tool, in the software engineering world and in many other fields.
The idea with concept maps is to take a piece of paper (or a digital tool) and <strong>draw all the concepts that come to mind for a specific topic, and all the relationships that link these concepts together</strong>.
Drawing a concept map is a way to organize the knowledge of a specific topic.</p>
<p>When doing this for a piece of software, we are not trying to add technical details about the way things are implemented: we are listing the various “actors” (the concepts) around our app, with the relationships they have.
For example, Figure <a href="dont-rush-into-coding.html#fig:07-step-by-step-design-1">7.1</a> is a very simple concept map of the <a href="https://github.com/colinfay/hexmake">hexmake</a> <span class="citation">(Fay <a href="references.html#ref-R-hexmake" role="doc-biblioref">2021</a><a href="references.html#ref-R-hexmake" role="doc-biblioref">g</a>)</span> app.</p>

<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:07-step-by-step-design-1"></span>
<img src="img/hexmakemap.png" alt="{hexmake} concept map, built with XMind (https://www.xmind.net)." width="100%"><p class="caption">
FIGURE 7.1: <a href="https://github.com/colinfay/hexmake">hexmake</a> concept map, built with XMind (<a href="https://www.xmind.net" class="uri">https://www.xmind.net</a>).
</p>
</div>
<p>As you can see, we are not detailing the technical implementations: we are not writing the external database specification, the connection process, how the different modules interact with each other, etc.
The goal of a concept map is to think about the big picture, to see the “who and what” of the application.
Here, creating this concept map helps us list the flow of the app: there is a user that wants to configure a hex, built with a default image or with an uploaded one, and once this hex is finished, the user can either download it or register it in a database.
This database can be browsed and restore hex.
The user can also export a <code>.hex</code> file, that can restore an app configuration.</p>
<p>Once this general flow is written down, you can get back to it several times during the process of building the app, but it is also a perfect tool at the end to see if everything is in place: once the application is finished, we can question it:</p>
<ul>
<li>Can we point to any concept and confirm it’s there?</li>
<li>Can we look at every relationship and see they all work as expected?</li>
</ul>
<p>Deciding which level of detail you want to put in your concept map depends; “simple” applications probably do not need complex maps.
And that also depends on how precise the specifications are, and how many people are working on the project: the concept map is a valuable tool when it comes to communication, as it allows people involved in the project to have visual clues of the conceptual architecture of the application.</p>
<p>But beware: very complex maps are also unreadable!
In that case, it might make sense to divide into several concept maps: one with the “big picture”, and smaller ones that focus on specific components of your application.</p>
</div>
</div>
<div id="ask-questions" class="section level2">
<h2>
<span class="header-section-number">7.2</span> Ask questions<a class="anchor" aria-label="anchor" href="#ask-questions"><i class="fas fa-link"></i></a>
</h2>
<p>Before starting to code, the safe call will be to ask your team/client (depending on the project) a series of questions just to get a good grasp of the whole project.</p>
<p>Here is a (non-exhaustive) list of information you might need along the way.</p>
<p>Side note: Of course, these questions do not cover the core features of the application.
We’re pretty sure you have thought about covering this already.
These are more contextual questions which are not directly linked to the application itself, yet that can be useful down the line.</p>
<div id="about-the-end-users" class="section level3">
<h3>
<span class="header-section-number">7.2.1</span> About the end users<a class="anchor" aria-label="anchor" href="#about-the-end-users"><i class="fas fa-link"></i></a>
</h3>
<p>Some questions you might ask:</p>
<ul>
<li>Who are the end users of your app?</li>
<li>Are they tech-literate?</li>
<li>In which context will they be using your app?</li>
<li>On what machines (computer, tablet, smartphone, or any other device)?</li>
<li>Are there any restrictions when it comes to the browser they are using? (For example, are they still using an old version of Internet Explorer?)</li>
<li>Will they be using the app in their office, on their phone while driving a tractor, in a plant, or while wearing a lab coat?</li>
</ul>
<p>Those might seem like weird questions if you are just focusing on the very technical side of the app implementation, but think about where the app will be used: the application used while driving agricultural machines might need fewer interactive things, bigger fonts, simpler interface, fewer details, and more direct information.
If you are building a <a href="http://shiny.rstudio.com">shiny</a> app for a team of sellers who are always on the road, chances are they will need an app that they can browse from their mobile.
And developing for mobiles requires a different kind of mindset.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;For developing an app that is mobile first, you can have a look at the great &lt;code&gt;{shinyMobile}&lt;/code&gt; &lt;span class="citation"&gt;(Granjon, Perrier, and Rudolf &lt;a href="references.html#ref-R-shinyMobile" role="doc-biblioref"&gt;2019&lt;/a&gt;)&lt;/span&gt; package made by the amazing Rinterface (&lt;a href="https://rinterface.com/" class="uri"&gt;https://rinterface.com/&lt;/a&gt;) team.&lt;/p&gt;'><sup>36</sup></a></p>
<p>Another good reason why talking to the users is an important step, is that most of the time, <strong>people writing specifications are not the end users and will either request too many features or not enough</strong>.
Do the users really need that many interactive plots?
Do they actually need that much granularity in the information?
Will they really see a <code>datatable</code> of 15k lines?
Do they really care about being able to zoom in the <code>dygraph</code> so that they can see the point at a minute scale?
To what extent does the app have to be fast?</p>
<p>Asking these questions is important, because building interactive widgets makes the app a little bit slower, and shoving in a series of unnecessary widgets will make the user experience worse, adding more cognitive load than necessary.
The speed of execution of your app is also an important parameter for your application: getting a sense about the need for speed in your application will allow you to judge whether or not you will have to focus on optimizing code execution.</p>
<p>On top of that, remember all these things we saw in the last chapter about accessibility: some of your end users might have specific accessibility requirements.</p>
</div>
<div id="building-personas" class="section level3">
<h3>
<span class="header-section-number">7.2.2</span> Building personas<a class="anchor" aria-label="anchor" href="#building-personas"><i class="fas fa-link"></i></a>
</h3>
<p>The persona is a concept borrowed from design and marketing that refers to fictional characters that will serve as a user type.
In other words<strong>, a persona is a character that represents the “typical” behavior and traits for a group of users that will interact with your product</strong>.</p>
<blockquote>
<p>A persona consists of a description of a fictional person who represents an important customer or user group for the product, and typically presents information about demographics, behavior, product usage, and product-related goals, tasks, attitudes, etc.</p>
<p><em>Quantitative Evaluation of Personas as Information</em> <span class="citation">(Chapman et al. <a href="references.html#ref-Chapman2008" role="doc-biblioref">2008</a>)</span></p>
</blockquote>
<p>Using personas during the design process helps you center your focus on the end user, so that you know who you are creating the application for.
Then, while building your application, you can think about how each persona will interact with a given feature: Will they use it?
Will they understand it?
Do we need to add extra information?
Will they find this useful?</p>
<p>Asking these kinds of questions helps you take a step back from feature implementation and re-focus on what matters: we are building application for someone else, who will eventually use it.</p>
<blockquote>
<p>The benefits of personas are that they enable designers to envision the end user’s needs and wants, remind designers that their own needs are not necessarily the end users’ needs, and provide an effective communication tool, which facilitates better design decisions.<br></p>
<p><em>Creating and Using Personas in Software Development: Experiences from Practice</em> <span class="citation">(Billestrup et al. <a href="references.html#ref-Billestrup2014" role="doc-biblioref">2014</a>)</span></p>
</blockquote>
<p>The building of these personas is made easier once you have interacted with the end users, as we suggested in the previous section.
Given the answers to these questions, you will be able to draw some common characteristics about the future users of your application.</p>
<p>And don’t hesitate to detail these fictional characters as “[p]ersonas are considered to be most useful if they are developed as whole characters, described with enough detail for designers and developers to get a feeling of its personality”.
<span class="citation">(Billestrup et al. <a href="references.html#ref-Billestrup2014" role="doc-biblioref">2014</a>)</span></p>
</div>
<div id="pre-existing-code-base" class="section level3">
<h3>
<span class="header-section-number">7.2.3</span> Pre-existing code-base<a class="anchor" aria-label="anchor" href="#pre-existing-code-base"><i class="fas fa-link"></i></a>
</h3>
<p>From time to time, you are building a <a href="http://shiny.rstudio.com">shiny</a> app on top of an existing code-base: either scripts with business logic, a package if you are lucky, or a PoC for a <a href="http://shiny.rstudio.com">shiny</a> app.</p>
<p>These kinds of projects are often referred to as “brownfield projects”, in opposition to “greenfield projects”, borrowing the terminology from urban planning: <strong>a greenfield project being one where you are building on “evergreen” lands, while a brownfield project is building on lands that were, for example, industrial lands, and which will need to be sanitized, as they potentially contain waste or pollution, constructions need to be destroyed, roads needs to be deviated, and all these things that can make the urban planning process more complex</strong>.
Then, you can extend this to software engineering, where a greenfield project is the one that you start from scratch, and a brownfield project is one where you need to build on top of an existing code-base, implying that you will need to do some extra work before actually working on the project.</p>
<div style="page-break-after: always;"></div>
<blockquote>
<p>When transforming brownfield projects, we may face significant impediments and problems, especially when no automated testing exists, or when there is a tightly-coupled architecture that prevents small teams from developing, testing, and deploying code independently.</p>
<p><em>The DevOps Handbook</em> <span class="citation">(Kim <a href="references.html#ref-genekim2016" role="doc-biblioref">2016</a>)</span></p>
</blockquote>
<p>Depending on how you chose to handle it, starting from a codebase that is already written can either be very much helping, or you can be shooting yourself in the foot.
Most of the time, <a href="http://shiny.rstudio.com">shiny</a> projects are not built as reproducible infrastructures: you will find a series of <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> calls, no functions structure <em>per se</em>, no documentation, and no tests.
In that case, we would advise you to do it “the hard way”, or at least what seems to be the hard way: throw the app away and start from scratch.</p>
<p>Well, not really from scratch: <strong>extract the core business logic of the app and make it a package</strong>.
Take some time with the developer(s) that built the current app, so that you can make them extract the core business logic, i.e. all the pieces of code that do not need a reactive context to run.
Write documentation for this package, work on testing, and once you are done, call it a day: you now have solid ground for building the back-end, and it is built outside of any reactivity, is not linked to any application, and most of the time it can be used outside of the app.
It might actually be more useful than you think: it can serve analysts and data scientists that will benefit from these functions outside of the application, as they can use the business logic functions that are now packaged, and so reusable.</p>
<p>Existing <a href="http://shiny.rstudio.com">shiny</a> projects, in most cases, have not been built by software engineers or web developers—they have been built by data analysts/scientists who wanted to create an interactive PoC for their work.
The good news, then, is that you can expect the core algorithms to be pretty solid and innovative.
But web development is not their strength: and that is perfectly normal, as it is not their core job.
What that implies is that most <a href="http://shiny.rstudio.com">shiny</a> PoCs take shortcuts and rely on hacks, especially when it comes to managing reactivity, which is a beautiful concept for small projects but can be very complex to scale if you are not a software engineer by training; even more, given that R is by nature sequential.</p>
<p>That’s why it is better to split the business and app logic from the very beginning (as we have explained in chapter 3): it simplifies the process of refactoring a <a href="http://shiny.rstudio.com">shiny</a> PoC into a production-grade <a href="http://shiny.rstudio.com">shiny</a> application.</p>
</div>
<div id="deployment" class="section level3">
<h3>
<span class="header-section-number">7.2.4</span> Deployment<a class="anchor" aria-label="anchor" href="#deployment"><i class="fas fa-link"></i></a>
</h3>
<p>There are so many considerations about deployment that it will be very hard to list them all, but keep in mind that <strong>if you do not ask questions about where your application will be deployed from the very beginning, sending it to production might become a painful experience</strong>.
Of course, it is more or less solved if you are deploying with Docker: if it works in a container on your machine, it should work in production, but it is not as simple as that: for example, building a <a href="http://shiny.rstudio.com">shiny</a> application that will be used by 10 people is not the same as building an application that needs to scale to 50.000 users.
Learning at the end of the project that “now we need to scale to a very large user base” might prevent the deployment from being successful, as this kind of scale implies specific consideration while building.</p>
<p>But that is just the tip of the iceberg of things that can happen.
Let’s stop for a little story: once upon a time, a team of developers was missioned to build an app, and one feature of the app was to do some API requests.
So far so good, nothing too complicated, until they discovered that the server where the app was going to be deployed does not have access to the internet, making it impossible to issue API requests from the server.
Here, the containers worked on the dev machines, as they had access to the internet.
Once deployed, the app stopped working, and the team lost a couple of days of exchanges with the client, trying to debug the API calls, until we realized that the issue was not with the app, but with the production server itself: and nobody in the team, not the developers or the client, thought about asking about internet access for the server.</p>
<p>It’s even more important to think about the IT side of your application, as the people writing specs and interacting with you might come from the Data Science team, and they might or might not have discussed with the IT team about deploying the app.
There is a chance that they do not have in mind all of what is needed to deploy a <a href="http://shiny.rstudio.com">shiny</a> app on their company server.</p>
<p>For example, maybe your application has a database back-end.
For that, you will need to have access to this database, the correct port should be set, and the permission given to the process that executes the <a href="http://shiny.rstudio.com">shiny</a> app to read, and maybe write, to the database.
But, <strong>and for good reason</strong>, database managers do not issue read and write permissions to a database without having examined what the app wants to read, and how and where it will write.
To sum up, if you do not want to have weeks of delay for your app deployment, start the discussion from the very beginning of the project.
That way, even if the process of getting permission to write on the company database takes time, you might have it by the end of the coding marathon.</p>

</div>
</div>
</div>




<hr>
<footer><a href="https://rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"></a>
<!--https://yihui.org/en/2018/09/target-blank/-->
<script>
  (function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script></footer><div class="chapter-nav">
<div class="prev"><a href="ux-matters.html"><span class="header-section-number">6</span> UX Matters</a></div>
<div class="next"><a href="setting-up-for-success.html"><span class="header-section-number">8</span> Setting up for Success with {golem}</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#dont-rush-into-coding"><span class="header-section-number">7</span> Don’t Rush into Coding</a></li>
<li>
<a class="nav-link" href="#designing-before-coding"><span class="header-section-number">7.1</span> Designing before coding</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#the-urge-to-code"><span class="header-section-number">7.1.1</span> The urge to code</a></li>
<li><a class="nav-link" href="#knowing-where-to-search"><span class="header-section-number">7.1.2</span> Knowing where to search</a></li>
<li><a class="nav-link" href="#about-concept-map"><span class="header-section-number">7.1.3</span> About concept map</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ask-questions"><span class="header-section-number">7.2</span> Ask questions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#about-the-end-users"><span class="header-section-number">7.2.1</span> About the end users</a></li>
<li><a class="nav-link" href="#building-personas"><span class="header-section-number">7.2.2</span> Building personas</a></li>
<li><a class="nav-link" href="#pre-existing-code-base"><span class="header-section-number">7.2.3</span> Pre-existing code-base</a></li>
<li><a class="nav-link" href="#deployment"><span class="header-section-number">7.2.4</span> Deployment</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/ThinkR-open/engineering-shiny-book/blob/master/07-step-by-step-design.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/ThinkR-open/engineering-shiny-book/edit/master/07-step-by-step-design.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Engineering Production-Grade Shiny Apps</strong>" was written by Colin Fay, Sébastien Rochette, Vincent Guyader, Cervan Girard. It was last built on 2022-01-26.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
