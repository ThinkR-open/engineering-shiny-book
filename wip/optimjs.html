<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 18 Using JavaScript | Building Big Shiny Apps - A Workflow</title>
  <meta name="description" content="Building Robust Shiny Application - A Workflow" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 18 Using JavaScript | Building Big Shiny Apps - A Workflow" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Building Robust Shiny Application - A Workflow" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 18 Using JavaScript | Building Big Shiny Apps - A Workflow" />
  
  <meta name="twitter:description" content="Building Robust Shiny Application - A Workflow" />
  

<meta name="author" content="Colin Fay, Vincent Guyader, Cervan Girard, Sébastien Rochette" />


<meta name="date" content="2019-10-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="optimizing-shiny-code.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Building Big Shiny Apps - A Workflow</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#want-to-help"><i class="fa fa-check"></i>Want to help?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-started-with-shiny"><i class="fa fa-check"></i>Getting started with Shiny</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#shiny-into-production"><i class="fa fa-check"></i>Shiny into production</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="part"><span><b>I Building Successful Shiny Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html"><i class="fa fa-check"></i><b>1</b> About Successful Shiny Apps</a><ul>
<li class="chapter" data-level="1.1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#a-very-short-introduction-to-shiny"><i class="fa fa-check"></i><b>1.1</b> A (very) short introduction to Shiny</a></li>
<li class="chapter" data-level="1.2" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#whats-a-complex-shiny-app"><i class="fa fa-check"></i><b>1.2</b> What’s a complex Shiny App?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#reaching-the-cliff-of-complexity"><i class="fa fa-check"></i><b>1.2.1</b> Reaching the cliff of complexity</a></li>
<li class="chapter" data-level="1.2.2" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#with-great-complexity-come-great-responsibilities"><i class="fa fa-check"></i><b>1.2.2</b> With great complexity come great responsibilities</a></li>
<li class="chapter" data-level="1.2.3" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#production-grade-software-engineering"><i class="fa fa-check"></i><b>1.2.3</b> Production Grade Software Engineering</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#whats-a-successful-shiny-app"><i class="fa fa-check"></i><b>1.3</b> What’s a successful Shiny App?</a><ul>
<li class="chapter" data-level="1.3.1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#it-exists"><i class="fa fa-check"></i><b>1.3.1</b> It exists</a></li>
<li class="chapter" data-level="1.3.2" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#its-accurate"><i class="fa fa-check"></i><b>1.3.2</b> It’s accurate</a></li>
<li class="chapter" data-level="1.3.3" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#its-usable"><i class="fa fa-check"></i><b>1.3.3</b> It’s usable</a></li>
<li class="chapter" data-level="1.3.4" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html#its-immortal"><i class="fa fa-check"></i><b>1.3.4</b> It’s immortal</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="planning.html"><a href="planning.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a><ul>
<li class="chapter" data-level="2.1" data-path="planning.html"><a href="planning.html#working-with-a-long-term-mindset"><i class="fa fa-check"></i><b>2.1</b> Working with a “long-term” mindset</a><ul>
<li class="chapter" data-level="2.1.1" data-path="planning.html"><a href="planning.html#prepare-for-success"><i class="fa fa-check"></i><b>2.1.1</b> Prepare for success</a></li>
<li class="chapter" data-level="2.1.2" data-path="planning.html"><a href="planning.html#applying-the-kiss-principle"><i class="fa fa-check"></i><b>2.1.2</b> Applying the KISS principle</a></li>
<li class="chapter" data-level="2.1.3" data-path="planning.html"><a href="planning.html#think-long-term-maintenance-now"><i class="fa fa-check"></i><b>2.1.3</b> Think long-term maintenance, now</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="planning.html"><a href="planning.html#working-as-a-team-tools-organisation"><i class="fa fa-check"></i><b>2.2</b> Working as a team: tools &amp; organisation</a><ul>
<li class="chapter" data-level="2.2.1" data-path="planning.html"><a href="planning.html#from-the-tools-point-of-view"><i class="fa fa-check"></i><b>2.2.1</b> From the tools point of view:</a></li>
<li class="chapter" data-level="2.2.2" data-path="planning.html"><a href="planning.html#from-the-organisational-point-of-view"><i class="fa fa-check"></i><b>2.2.2</b> From the organisational point of view</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>3</b> Structuring your Project</a><ul>
<li class="chapter" data-level="3.1" data-path="structure.html"><a href="structure.html#shiny-app-as-a-package"><i class="fa fa-check"></i><b>3.1</b> Shiny App as a Package</a><ul>
<li class="chapter" data-level="3.1.1" data-path="structure.html"><a href="structure.html#whats-in-a-shiny-app"><i class="fa fa-check"></i><b>3.1.1</b> What’s in a Shiny App?</a></li>
<li class="chapter" data-level="3.1.2" data-path="structure.html"><a href="structure.html#the-other-plus-side-of-shiny-as-a-package"><i class="fa fa-check"></i><b>3.1.2</b> The other plus side of Shiny as a Package</a></li>
<li class="chapter" data-level="3.1.3" data-path="structure.html"><a href="structure.html#deploy"><i class="fa fa-check"></i><b>3.1.3</b> Deploy</a></li>
<li class="chapter" data-level="3.1.4" data-path="structure.html"><a href="structure.html#resources"><i class="fa fa-check"></i><b>3.1.4</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="structure.html"><a href="structure.html#using-shiny-modules"><i class="fa fa-check"></i><b>3.2</b> Using Shiny Modules</a></li>
<li class="chapter" data-level="3.3" data-path="structure.html"><a href="structure.html#splitting-your-app-into-files"><i class="fa fa-check"></i><b>3.3</b> Splitting your app into files</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a><ul>
<li class="chapter" data-level="4.1" data-path="golem.html"><a href="golem.html#getting-started-with-golem"><i class="fa fa-check"></i><b>4.1</b> Getting started with <code>{golem}</code></a></li>
<li class="chapter" data-level="4.2" data-path="golem.html"><a href="golem.html#understanding-golem-package-structure"><i class="fa fa-check"></i><b>4.2</b> Understanding <code>{golem}</code> package structure</a><ul>
<li class="chapter" data-level="4.2.1" data-path="golem.html"><a href="golem.html#description-namespace"><i class="fa fa-check"></i><b>4.2.1</b> <code>DESCRIPTION</code> &amp; <code>NAMESPACE</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="golem.html"><a href="golem.html#r"><i class="fa fa-check"></i><b>4.2.2</b> R/</a></li>
<li class="chapter" data-level="4.2.3" data-path="golem.html"><a href="golem.html#instappwww"><i class="fa fa-check"></i><b>4.2.3</b> <code>inst/app/www/</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="golem.html"><a href="golem.html#man"><i class="fa fa-check"></i><b>4.2.4</b> <code>man/</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The workflow</a><ul>
<li class="chapter" data-level="5.1" data-path="workflow.html"><a href="workflow.html#part-1-design"><i class="fa fa-check"></i><b>5.1</b> Part 1: Design</a></li>
<li class="chapter" data-level="5.2" data-path="workflow.html"><a href="workflow.html#part-2-prototype"><i class="fa fa-check"></i><b>5.2</b> Part 2: Prototype</a></li>
<li class="chapter" data-level="5.3" data-path="workflow.html"><a href="workflow.html#part-3-build"><i class="fa fa-check"></i><b>5.3</b> Part 3: Build</a></li>
<li class="chapter" data-level="5.4" data-path="workflow.html"><a href="workflow.html#part-4-secure"><i class="fa fa-check"></i><b>5.4</b> Part 4: Secure</a></li>
<li class="chapter" data-level="5.5" data-path="workflow.html"><a href="workflow.html#part-5-deploy"><i class="fa fa-check"></i><b>5.5</b> Part 5: Deploy</a></li>
</ul></li>
<li class="part"><span><b>II Step 1: Designing</b></span></li>
<li class="chapter" data-level="6" data-path="uxmatters.html"><a href="uxmatters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a><ul>
<li class="chapter" data-level="6.1" data-path="uxmatters.html"><a href="uxmatters.html#the-unbearable-lightness-of-being"><i class="fa fa-check"></i><b>6.1</b> <strong>The Unbearable Lightness of Being</strong></a><ul>
<li class="chapter" data-level="6.1.1" data-path="uxmatters.html"><a href="uxmatters.html#make-a-self-explanatory-app"><i class="fa fa-check"></i><b>6.1.1</b> Make a self-explanatory app</a></li>
<li class="chapter" data-level="6.1.2" data-path="uxmatters.html"><a href="uxmatters.html#rule-of-least-surprise"><i class="fa fa-check"></i><b>6.1.2</b> “Rule of Least Surprise”</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="uxmatters.html"><a href="uxmatters.html#the-danger-of-over-featuring"><i class="fa fa-check"></i><b>6.2</b> The danger of over-featuring</a><ul>
<li class="chapter" data-level="6.2.1" data-path="uxmatters.html"><a href="uxmatters.html#restrain-reactivity"><i class="fa fa-check"></i><b>6.2.1</b> Restrain reactivity</a></li>
<li class="chapter" data-level="6.2.2" data-path="uxmatters.html"><a href="uxmatters.html#too-much-interactivity"><i class="fa fa-check"></i><b>6.2.2</b> Too much interactivity</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="uxmatters.html"><a href="uxmatters.html#about-accessibility"><i class="fa fa-check"></i><b>6.3</b> About Accessibility</a></li>
<li class="chapter" data-level="6.4" data-path="uxmatters.html"><a href="uxmatters.html#further-reading"><i class="fa fa-check"></i><b>6.4</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="step-design.html"><a href="step-design.html"><i class="fa fa-check"></i><b>7</b> Don’t rush into coding</a><ul>
<li class="chapter" data-level="7.1" data-path="step-design.html"><a href="step-design.html#designing-before-coding"><i class="fa fa-check"></i><b>7.1</b> Designing before coding</a></li>
<li class="chapter" data-level="7.2" data-path="step-design.html"><a href="step-design.html#ask-questions"><i class="fa fa-check"></i><b>7.2</b> Ask questions</a></li>
</ul></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="8" data-path="stepprotopype.html"><a href="stepprotopype.html"><i class="fa fa-check"></i><b>8</b> Building an “ipsum-app”</a><ul>
<li class="chapter" data-level="8.1" data-path="stepprotopype.html"><a href="stepprotopype.html#prototyping-is-crucial"><i class="fa fa-check"></i><b>8.1</b> Prototyping is crucial</a></li>
<li class="chapter" data-level="8.2" data-path="stepprotopype.html"><a href="stepprotopype.html#the-ui-first-approach"><i class="fa fa-check"></i><b>8.2</b> The “UI first” approach</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="proto.html"><a href="proto.html"><i class="fa fa-check"></i><b>9</b> Tools for prototyping</a><ul>
<li class="chapter" data-level="9.1" data-path="proto.html"><a href="proto.html#fast-prototyping-with-shinipsum"><i class="fa fa-check"></i><b>9.1</b> Fast prototyping with <code>{shinipsum}</code></a></li>
<li class="chapter" data-level="9.2" data-path="proto.html"><a href="proto.html#using-fakir-for-fake-data-generation"><i class="fa fa-check"></i><b>9.2</b> Using <code>{fakir}</code> for fake data generation</a></li>
</ul></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="10" data-path="stepbuild.html"><a href="stepbuild.html"><i class="fa fa-check"></i><b>10</b> Building app with <code>{golem}</code></a><ul>
<li class="chapter" data-level="10.1" data-path="stepbuild.html"><a href="stepbuild.html#using-golem"><i class="fa fa-check"></i><b>10.1</b> Using <code>{golem}</code></a><ul>
<li class="chapter" data-level="10.1.1" data-path="stepbuild.html"><a href="stepbuild.html#create-a-package"><i class="fa fa-check"></i><b>10.1.1</b> Create a package</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="stepbuild.html"><a href="stepbuild.html#dev01_start.r"><i class="fa fa-check"></i><b>10.2</b> <code>dev/01_start.R</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="stepbuild.html"><a href="stepbuild.html#fill-the-desc"><i class="fa fa-check"></i><b>10.2.1</b> Fill the DESC</a></li>
<li class="chapter" data-level="10.2.2" data-path="stepbuild.html"><a href="stepbuild.html#set-common-files"><i class="fa fa-check"></i><b>10.2.2</b> Set common Files</a></li>
<li class="chapter" data-level="10.2.3" data-path="stepbuild.html"><a href="stepbuild.html#add-a-data-raw-folder"><i class="fa fa-check"></i><b>10.2.3</b> Add a data-raw folder</a></li>
<li class="chapter" data-level="10.2.4" data-path="stepbuild.html"><a href="stepbuild.html#init-tests"><i class="fa fa-check"></i><b>10.2.4</b> Init Tests</a></li>
<li class="chapter" data-level="10.2.5" data-path="stepbuild.html"><a href="stepbuild.html#use-recommended-package"><i class="fa fa-check"></i><b>10.2.5</b> Use Recommended Package</a></li>
<li class="chapter" data-level="10.2.6" data-path="stepbuild.html"><a href="stepbuild.html#add-various-tools"><i class="fa fa-check"></i><b>10.2.6</b> Add various tools</a></li>
<li class="chapter" data-level="10.2.7" data-path="stepbuild.html"><a href="stepbuild.html#if-you-want-to-change-the-default-favicon"><i class="fa fa-check"></i><b>10.2.7</b> If you want to change the default favicon</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="stepbuild.html"><a href="stepbuild.html#day-to-day-dev-with-golem"><i class="fa fa-check"></i><b>10.3</b> Day to Day Dev with <code>{golem}</code></a></li>
<li class="chapter" data-level="10.4" data-path="stepbuild.html"><a href="stepbuild.html#launching-the-app"><i class="fa fa-check"></i><b>10.4</b> Launching the app</a></li>
<li class="chapter" data-level="10.5" data-path="stepbuild.html"><a href="stepbuild.html#dev02_dev.r"><i class="fa fa-check"></i><b>10.5</b> <code>dev/02_dev.R</code></a><ul>
<li class="chapter" data-level="10.5.1" data-path="stepbuild.html"><a href="stepbuild.html#add-modules"><i class="fa fa-check"></i><b>10.5.1</b> Add modules</a></li>
<li class="chapter" data-level="10.5.2" data-path="stepbuild.html"><a href="stepbuild.html#add-dependencies"><i class="fa fa-check"></i><b>10.5.2</b> Add dependencies</a></li>
<li class="chapter" data-level="10.5.3" data-path="stepbuild.html"><a href="stepbuild.html#add-tests"><i class="fa fa-check"></i><b>10.5.3</b> Add tests</a></li>
<li class="chapter" data-level="10.5.4" data-path="stepbuild.html"><a href="stepbuild.html#add-a-browser-button"><i class="fa fa-check"></i><b>10.5.4</b> Add a browser button</a></li>
<li class="chapter" data-level="10.5.5" data-path="stepbuild.html"><a href="stepbuild.html#add-external-files"><i class="fa fa-check"></i><b>10.5.5</b> Add external files</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="stepbuild.html"><a href="stepbuild.html#adding-these-external-resources-to-your-app"><i class="fa fa-check"></i><b>10.6</b> Adding these external resources to your app</a></li>
<li class="chapter" data-level="10.7" data-path="stepbuild.html"><a href="stepbuild.html#documentation"><i class="fa fa-check"></i><b>10.7</b> Documentation</a><ul>
<li class="chapter" data-level="10.7.1" data-path="stepbuild.html"><a href="stepbuild.html#vignette"><i class="fa fa-check"></i><b>10.7.1</b> Vignette</a></li>
<li class="chapter" data-level="10.7.2" data-path="stepbuild.html"><a href="stepbuild.html#code-coverage"><i class="fa fa-check"></i><b>10.7.2</b> Code coverage</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="stepbuild.html"><a href="stepbuild.html#using-golem-dev-functions"><i class="fa fa-check"></i><b>10.8</b> Using <code>{golem}</code> dev functions</a></li>
</ul></li>
<li class="part"><span><b>V Step 4: Secure</b></span></li>
<li class="chapter" data-level="11" data-path="step-secure.html"><a href="step-secure.html"><i class="fa fa-check"></i><b>11</b> Build yourself a safe net</a><ul>
<li class="chapter" data-level="11.1" data-path="step-secure.html"><a href="step-secure.html#testing-your-app"><i class="fa fa-check"></i><b>11.1</b> Testing your app</a></li>
<li class="chapter" data-level="11.2" data-path="step-secure.html"><a href="step-secure.html#a-reproducible-environment"><i class="fa fa-check"></i><b>11.2</b> A reproducible environment</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="secure.html"><a href="secure.html"><i class="fa fa-check"></i><b>12</b> Secure your work</a><ul>
<li class="chapter" data-level="12.1" data-path="secure.html"><a href="secure.html#git"><i class="fa fa-check"></i><b>12.1</b> Git</a></li>
<li class="chapter" data-level="12.2" data-path="secure.html"><a href="secure.html#ci-and-testing"><i class="fa fa-check"></i><b>12.2</b> CI and testing</a></li>
</ul></li>
<li class="part"><span><b>VI Step 5: Deploy</b></span></li>
<li class="chapter" data-level="13" data-path="stepdeploy.html"><a href="stepdeploy.html"><i class="fa fa-check"></i><b>13</b> Send your app to production</a></li>
<li class="chapter" data-level="14" data-path="deploy-golem.html"><a href="deploy-golem.html"><i class="fa fa-check"></i><b>14</b> Deploy with <code>{golem}</code></a><ul>
<li class="chapter" data-level="14.1" data-path="deploy-golem.html"><a href="deploy-golem.html#local-deployment-1"><i class="fa fa-check"></i><b>14.1</b> Local deployment</a></li>
<li class="chapter" data-level="14.2" data-path="deploy-golem.html"><a href="deploy-golem.html#deploying-apps-with-golem"><i class="fa fa-check"></i><b>14.2</b> Deploying Apps with <code>{golem}</code></a></li>
<li class="chapter" data-level="14.3" data-path="deploy-golem.html"><a href="deploy-golem.html#rstudio-environments"><i class="fa fa-check"></i><b>14.3</b> RStudio Environments</a></li>
<li class="chapter" data-level="14.4" data-path="deploy-golem.html"><a href="deploy-golem.html#docker"><i class="fa fa-check"></i><b>14.4</b> Docker</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="when-optimize.html"><a href="when-optimize.html"><i class="fa fa-check"></i><b>15</b> The Need for Optimization</a><ul>
<li class="chapter" data-level="15.1" data-path="when-optimize.html"><a href="when-optimize.html#build-first-then-optimize"><i class="fa fa-check"></i><b>15.1</b> Build first, then optimize</a></li>
<li class="chapter" data-level="15.2" data-path="when-optimize.html"><a href="when-optimize.html#tools-for-profiling"><i class="fa fa-check"></i><b>15.2</b> Tools for profiling</a></li>
</ul></li>
<li class="part"><span><b>VII Optimizing</b></span></li>
<li class="chapter" data-level="16" data-path="optim-caveat.html"><a href="optim-caveat.html"><i class="fa fa-check"></i><b>16</b> Common Application Caveats</a><ul>
<li class="chapter" data-level="16.1" data-path="optim-caveat.html"><a href="optim-caveat.html#reactivity-anti-patterns"><i class="fa fa-check"></i><b>16.1</b> Reactivity anti-patterns</a></li>
<li class="chapter" data-level="16.2" data-path="optim-caveat.html"><a href="optim-caveat.html#reading-data"><i class="fa fa-check"></i><b>16.2</b> Reading data</a></li>
<li class="chapter" data-level="16.3" data-path="optim-caveat.html"><a href="optim-caveat.html#r-does-too-much"><i class="fa fa-check"></i><b>16.3</b> R does too much</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>17</b> Optimizing Shiny Code</a><ul>
<li class="chapter" data-level="17.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#reading-data-1"><i class="fa fa-check"></i><b>17.1</b> Reading data</a></li>
<li class="chapter" data-level="17.2" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#caching-elements"><i class="fa fa-check"></i><b>17.2</b> Caching elements</a></li>
<li class="chapter" data-level="17.3" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#keeping-things-simple"><i class="fa fa-check"></i><b>17.3</b> Keeping things simple</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="optimjs.html"><a href="optimjs.html"><i class="fa fa-check"></i><b>18</b> Using JavaScript</a><ul>
<li class="chapter" data-level="18.1" data-path="optimjs.html"><a href="optimjs.html#a-quick-introduction-to-javascript"><i class="fa fa-check"></i><b>18.1</b> A quick introduction to JavaScript</a><ul>
<li class="chapter" data-level="18.1.1" data-path="optimjs.html"><a href="optimjs.html#understanding-html-class-and-id"><i class="fa fa-check"></i><b>18.1.1</b> Understanding html, class, and id</a></li>
<li class="chapter" data-level="18.1.2" data-path="optimjs.html"><a href="optimjs.html#about-jquery-jquery-selectors"><i class="fa fa-check"></i><b>18.1.2</b> About jQuery &amp; jQuery selectors</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="optimjs.html"><a href="optimjs.html#client-side-javascript"><i class="fa fa-check"></i><b>18.2</b> Client-side JavaScript</a><ul>
<li class="chapter" data-level="18.2.1" data-path="optimjs.html"><a href="optimjs.html#common-patterns"><i class="fa fa-check"></i><b>18.2.1</b> Common patterns</a></li>
<li class="chapter" data-level="18.2.2" data-path="optimjs.html"><a href="optimjs.html#where-to-put-them---introduction-to-javascript-events"><i class="fa fa-check"></i><b>18.2.2</b> Where to put them - introduction to JavaScript events</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="optimjs.html"><a href="optimjs.html#javascript---shiny-communication"><i class="fa fa-check"></i><b>18.3</b> JavaScript &lt;-&gt; Shiny communication</a><ul>
<li class="chapter" data-level="18.3.1" data-path="optimjs.html"><a href="optimjs.html#from-r-to-javascript"><i class="fa fa-check"></i><b>18.3.1</b> From R to JavaScript</a></li>
<li class="chapter" data-level="18.3.2" data-path="optimjs.html"><a href="optimjs.html#from-javascript-to-r"><i class="fa fa-check"></i><b>18.3.2</b> From JavaScript to R</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="optimjs.html"><a href="optimjs.html#about-golem-js-functions"><i class="fa fa-check"></i><b>18.4</b> About <code>{golem}</code> js functions</a><ul>
<li class="chapter" data-level="18.4.1" data-path="optimjs.html"><a href="optimjs.html#golemactivate_js"><i class="fa fa-check"></i><b>18.4.1</b> <code>golem::activate_js()</code></a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="optimjs.html"><a href="optimjs.html#learn-more-about-javascript"><i class="fa fa-check"></i><b>18.5</b> Learn more about JavaScript</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Building Big Shiny Apps - A Workflow</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="optimjs" class="section level1">
<h1><span class="header-section-number">Chapter 18</span> Using JavaScript</h1>
<p>In its core, building a Shiny app is building a JavaScript app that can talk with an R session.
This process is hidden from the common Shiny developer, who usually works on everything from R.
In the end, for most of the Shiny apps out there, everything is done with R, but when you are writing UI elements in Shiny what you are actually doing is building a series of HTML tags, which are then linked to JavaScript events.
Later on, when the app is running, these JavaScript events will communicate with R, in the sense that they will send data to R, and receive data from R.
Most of the time, when this JavaScript events are receiving data, that also means that they modify the page the user sees.
What happens under the hood is a little bit complex and out of scope for this book, but the general idea is there: R talks to your browser through a web socket, and this browser talks to R through the same web socket.</p>
<p>// TODO: create here a simple Flowchart</p>
<p>// R -&gt; (Web Socket) -&gt; JS</p>
<p>// R &lt;- (Web Socket) &lt;- JS</p>
<p>It’s important to note here that the communication happens in both ways: from R to JavaScript, and from JavaScript to R.
In fact, when we write a piece of code like <code>sliderInput(&quot;plop&quot;, &quot;this&quot;, 1, 10, 5)</code>, what we are doing is creating a binding between JavaScript and R, where JavaScript listens to any event happening in the browser on the slider with the id <code>&quot;plop&quot;</code>, and whenever JavaScript detects that something happens to this element, something (most of the time its value) is sent back to R.
With <code>output$bla &lt;- renderPlot({})</code>, what we are doing is making the two communicates the other way around: we are telling JavaScript to listen to any incoming data from R for the <code>id</code> <code>&quot;bla&quot;</code>, and whenever JavaScript sees incoming data from R, it puts it into the proper HTML tag.</p>
<p>So even if everything happens in R, we <strong>are</strong> writing a web application (i.e. HTML, CSS and JavaScript elements), from R.
Once you’ve realized that, the possibilities are endless: in fact almost anything doable in a web app can be done in Shiny.
What this also implies is that getting (even a little bit) better at writing HTML, CSS and especially JavaScript will make your app better, lighter, and more user friendly.
JavaScript is a language that has been designed to interact with a web page: change element appearances, hide and show things, click somewhere, show alerts and prompts…
What that means is that knowing just enough JavaScript can improve the quality of your app: especially when you’ve been using R to build some complex UI renderings: think conditional panels, simulating a button click from the server, hide and show elements…
All these things are good examples of where you should be using JavaScript instead of building more or less complex <code>renderUI</code> or <code>insertUI</code> patterns in your server.</p>
<p>Moreover, the number of JavaScript libraries available on the web is tremendous ; and the good news is that Shiny has everything it needs to bundle external JavaScript libraries inside your application<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a>.</p>
<p>This is what this part aims to do: giving you just enough JavaScript knowledge to lighten your Shiny App, and improve the global user and developer experience.
In this part, we’ll first see some JavaScript basics.
This JS code can be used “client-side” only, i.e. only in your browser, by making R &amp; JS communicate with each other.
We’ll also see this in in this chapter: how to make R and JavaScript exchange data.
In this part, we’ll also explore common patterns for JavaScript in Shiny.
Finally, we’ll quickly present some of the functions from <code>{golem}</code> which are built on top of JavaScript.</p>
<blockquote>
<p>Note that this chapter is not supposed to be a comprehensive JavaScript course.
External resources are linked all throughout this chapter if you want to dive deeper into JavaScript.</p>
</blockquote>
<div id="a-quick-introduction-to-javascript" class="section level2">
<h2><span class="header-section-number">18.1</span> A quick introduction to JavaScript</h2>
<p>JavaScript is a programming language which has been designed to work in the browser<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a>.
There are three ways to include the JavaScript code inside your web app:</p>
<ul>
<li>As an external file, which is delivered to the browser alongside your main application page</li>
<li>Inside a <code>&lt;script&gt;</code> HTML tag your page</li>
<li>On a specific tag, for example by adding an <code>onclick</code> event straight on the tag</li>
</ul>
<blockquote>
<p>Note that the good practice when it comes to include JavaScript is to add the code inside an external file.</p>
</blockquote>
<p>If you’re working with <code>{golem}</code>, including a JavaScript file is performed using two functions:</p>
<ul>
<li><code>golem::add_js_file(&quot;name&quot;)</code>, which adds a standard JavaScript file, i.e. one which is not meant to be used to communicate with R (which is the “modern standard way” to do it).
We’ll see in the first part of this chapter how to add JavaScript code there.</li>
<li><code>golem::add_js_handler(&quot;name&quot;)</code>, which creates a file with a skeleton for shiny handlers (which is specific to Shiny).
We’ll see this second type of elements in the <code>JavaScript &lt;-&gt; Shiny communication</code> part.</li>
</ul>
<p>OK, good, but what do we do now?</p>
<div id="understanding-html-class-and-id" class="section level3">
<h3><span class="header-section-number">18.1.1</span> Understanding html, class, and id</h3>
<p>You have to think of a web page as a tree, where the top of the webpage is the root node, and every element in the page is a node in this tree (this tree is called a DOM, for Document Object Model).
And of course, you can work on any of these HTML node with JavaScript: modify it, bind and/or listen to events, hide and show it…
But of course, you have to find a way to identify these elements: either as a group of elements or as a unique element inside the whole tree: that’s what html semantic elements, classes and ids are made for.
Consider this piece of code:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb45-3" data-line-number="3">  <span class="kw">titlePanel</span>(<span class="st">&quot;Hello Shiny&quot;</span>), </a>
<a class="sourceLine" id="cb45-4" data-line-number="4">  <span class="kw">actionButton</span>(<span class="st">&quot;go&quot;</span>, <span class="st">&quot;go&quot;</span>)</a>
<a class="sourceLine" id="cb45-5" data-line-number="5">)</a></code></pre></div>
<pre><code>&lt;div class=&quot;container-fluid&quot;&gt;
  &lt;h2&gt;Hello Shiny&lt;/h2&gt;
  &lt;button id=&quot;go&quot; type=&quot;button&quot; class=&quot;btn btn-default action-button&quot;&gt;go&lt;/button&gt;
&lt;/div&gt;</code></pre>
<p>This <code>{shiny}</code> code creates a piece of HTML code, which contains three nodes: a <code>div</code>, which is a container, an <code>h2</code>, which is a level two header, a button which has an id and a class.
Both are included into the <code>div</code>.
Let’s detail what we’ve got here:</p>
<ul>
<li>HTML tags, which are the building blocks of the “tree”: here, <code>div</code>, <code>h2</code> and <code>button</code> are HTML tags.</li>
<li>The button has an <code>id</code>, which is short for “identifier”.
This id has to to be unique: it’s this reference that allows to spot this exact element, and more specifically it’s this id that allows JavaScript and R to talk to each other: if you click on a button, you have to be sure that it’s this specific button, and only that one.</li>
<li>Elements can have a class, which can apply to multiple elements.
This can be used in JavaScript, but it’s also very useful for styling elements in CSS.</li>
</ul>
</div>
<div id="about-jquery-jquery-selectors" class="section level3">
<h3><span class="header-section-number">18.1.2</span> About jQuery &amp; jQuery selectors</h3>
<p>The <code>jQuery</code> framework is natively included in Shiny.</p>
<blockquote>
<p>jQuery is a fast, small, and feature-rich JavaScript library. It makes things like HTML document traversal and manipulation, event handling, animation, and Ajax much simpler with an easy-to-use API that works across a multitude of browsers.</p>
</blockquote>
<p>jQuery is a very (like, very) popular JavaScript library which is designed to manipulate the DOM, its events and its elements.
It can be used to do a lot of things, like hide and show, change class, click somewhere…
And to be able to do that, it comes with the notion of selectors, which will be put between <code>$()</code>.
You can use, for example:</p>
<ul>
<li><p><code>$(&quot;#plop&quot;)</code> to refer to the element with the id <code>plop</code></p></li>
<li><p><code>$(&quot;.pouet&quot;)</code> to refer to element(s) of class <code>pouet</code></p></li>
<li><p><code>$(&quot;button:contains('this')&quot;)</code> to refer to the buttons with a text containing <code>'this'</code></p></li>
</ul>
<p>You can also use special HTML attributes.
For example:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="kw">&lt;a</span><span class="ot"> href</span> <span class="ot">=</span> <span class="st">&quot;https://thinkr.fr&quot;</span><span class="ot"> data-value</span> <span class="ot">=</span> <span class="st">&quot;panel2&quot;</span><span class="kw">&gt;</span>ThinkR<span class="kw">&lt;/a&gt;</span></a></code></pre></div>
<p>contains the <code>href</code> &amp; <code>data-value</code> attributes.
You can refer to these with <code>[]</code> after the tag name.</p>
<ul>
<li><p><code>$(&quot;a[href = 'https://thinkr.fr'])</code> refers to link(s) with <code>href</code> being <code>https://thinkr.fr</code></p></li>
<li><p><code>$('a[data-value=&quot;panel2&quot;]')</code> refers to link(s) with <code>data-value</code> being <code>&quot;panel2&quot;</code></p></li>
</ul>
<p>All these selectors, along many others, are used to identify one or more node in the big tree which is a web page.
Once we’ve identified these elements, we can either extract or change data contained in these nodes, or launch methods contained inside these nodes.
Indeed JavaScript, as R, can be used as a functional language, but most of what we do is done in an object-oriented way.
In other words, you’ll interact with objects from the web page, and these objects contain data and methods.</p>
<p>Note that these behavior is not specific to jQuery: elements can also be selected with standard JavaScript.
jQuery has the advantage of simplifying selections and actions, and to be cross-platform, making it easier to ship applications that can work on all major browsers.
And, it comes with Shiny for free!</p>
</div>
</div>
<div id="client-side-javascript" class="section level2">
<h2><span class="header-section-number">18.2</span> Client-side JavaScript</h2>
<p>It’s hard to give an exhaustive list of what you can do with JavaScript inside Shiny.
As a Shiny app is part JavaScript, part R, once you’ve got a good grasp of JavaScript you can quickly enhance any of your applications.
That being said, there are some common things that can be done that would allow you to immediately optimize your application: i.e. small JavaScript functions that will prevent you from writing complex algorithmic logic in your application server.</p>
<div id="common-patterns" class="section level3">
<h3><span class="header-section-number">18.2.1</span> Common patterns</h3>
<ul>
<li><code>$('#id').show();</code> and <code>$('#id').hide();</code> show and hide one or more elements that match the given selector.
For example, this can be use to replace:</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">output<span class="op">$</span>ui &lt;-<span class="st"> </span><span class="kw">renderUI</span>({</a>
<a class="sourceLine" id="cb48-2" data-line-number="2">  <span class="cf">if</span> (this){</a>
<a class="sourceLine" id="cb48-3" data-line-number="3">    <span class="kw">tags</span>(...)</a>
<a class="sourceLine" id="cb48-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb48-5" data-line-number="5">    <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb48-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb48-7" data-line-number="7">})</a></code></pre></div>
<ul>
<li><p><code>alert(&quot;message&quot;)</code> uses the built-in alert-box mechanism from the user’s browser (i.e., the <code>alert()</code> function is not part of jQuery but it’s built inside your browser).
It works well as it relies on the browser instead of R.
For example, you can use this functionality to replace a call to <code>{shinyalert}</code>: the result is a little bit less aesthetically pleasing, but that’s easier to implement and maintain.</p></li>
<li><p><code>var x = prompt(&quot;this&quot;, &quot;that&quot;);</code> this function open the built-in prompt, which is a text area where the user can input text.
With this code, when the user clicks on “OK”, the text is stocked in a variable <code>x</code>, which you can then send back to R (see further part down this chapter for more info about how to do that).
This can replace something like :</p></li>
</ul>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">mod &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb49-2" data-line-number="2">  <span class="kw">modalDialog</span>(</a>
<a class="sourceLine" id="cb49-3" data-line-number="3">    <span class="kw">tagList</span>(</a>
<a class="sourceLine" id="cb49-4" data-line-number="4">      <span class="kw">textInput</span>(<span class="kw">ns</span>(<span class="st">&quot;info&quot;</span>), <span class="st">&quot;Your info here&quot;</span>)</a>
<a class="sourceLine" id="cb49-5" data-line-number="5">    ),</a>
<a class="sourceLine" id="cb49-6" data-line-number="6">    <span class="dt">footer =</span> <span class="kw">tagList</span>(</a>
<a class="sourceLine" id="cb49-7" data-line-number="7">      <span class="kw">modalButton</span>(<span class="st">&quot;Cancel&quot;</span>),</a>
<a class="sourceLine" id="cb49-8" data-line-number="8">      <span class="kw">actionButton</span>(<span class="kw">ns</span>(<span class="st">&quot;ok&quot;</span>), <span class="st">&quot;OK&quot;</span>)</a>
<a class="sourceLine" id="cb49-9" data-line-number="9">    )</a>
<a class="sourceLine" id="cb49-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb49-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb49-12" data-line-number="12"></a>
<a class="sourceLine" id="cb49-13" data-line-number="13"><span class="kw">observeEvent</span>(input<span class="op">$</span>show, {</a>
<a class="sourceLine" id="cb49-14" data-line-number="14">  <span class="kw">showModal</span>(<span class="kw">mod</span>())</a>
<a class="sourceLine" id="cb49-15" data-line-number="15">})</a>
<a class="sourceLine" id="cb49-16" data-line-number="16"><span class="kw">observeEvent</span>(input<span class="op">$</span>ok, {</a>
<a class="sourceLine" id="cb49-17" data-line-number="17">  <span class="kw">removeModal</span>()</a>
<a class="sourceLine" id="cb49-18" data-line-number="18">})</a></code></pre></div>
<ul>
<li><p><code>$('#id').css('color', 'blue');</code> changes the css attributes of the selected element(s).
Here, we’re switching to blue on the <code>#id</code> element.</p></li>
<li><p><code>$(&quot;#id&quot;).text( &quot;this&quot; );</code> changes the text content to “this”.
This can be used to replace</p></li>
</ul>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">output<span class="op">$</span>ui &lt;-<span class="st"> </span><span class="kw">renderUI</span>({</a>
<a class="sourceLine" id="cb50-2" data-line-number="2">  <span class="cf">if</span> (this){</a>
<a class="sourceLine" id="cb50-3" data-line-number="3">    tags<span class="op">$</span><span class="kw">p</span>(<span class="st">&quot;First&quot;</span>)</a>
<a class="sourceLine" id="cb50-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb50-5" data-line-number="5">    tags<span class="op">$</span><span class="kw">p</span>(<span class="st">&quot;Second&quot;</span>)</a>
<a class="sourceLine" id="cb50-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb50-7" data-line-number="7">})</a></code></pre></div>
<ul>
<li><code>$(&quot;#id&quot;).remove();</code> completely removes the element from the DOM.
IT can be used as a replacement for <code>shiny::removeUI()</code>, or as a conditional UI.</li>
</ul>
</div>
<div id="where-to-put-them---introduction-to-javascript-events" class="section level3">
<h3><span class="header-section-number">18.2.2</span> Where to put them - introduction to JavaScript events</h3>
<p>OK, now that we’ve got some ideas about JS code that can be used in Shiny, where do we put them?
HTML and JS have a concept called <code>events</code>, which happens when the user manipulates the webpage: when the user clicks, hovers (the mouse goes over an element), press the keyboard…
All these events can trigger a JavaScript function.
Here are some example of adding JavaScript functions to DOM events:</p>
<p>+<code>onclick</code></p>
<p>The <code>onclick</code> attribute can be add straight inside the HTML tag when possible:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">tags<span class="op">$</span><span class="kw">button</span>(</a>
<a class="sourceLine" id="cb51-2" data-line-number="2">  <span class="st">&quot;Show&quot;</span></a>
<a class="sourceLine" id="cb51-3" data-line-number="3">  <span class="dt">onclick =</span> <span class="st">&quot;$(&#39;#plot&#39;).show()&quot;</span></a>
<a class="sourceLine" id="cb51-4" data-line-number="4">)</a></code></pre></div>
<p>Or with <code>shiny::tagAppendAttributes</code>:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="kw">plotOutput</span>(</a>
<a class="sourceLine" id="cb52-2" data-line-number="2">  <span class="st">&quot;plot&quot;</span></a>
<a class="sourceLine" id="cb52-3" data-line-number="3">) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tagAppendAttributes</span>(</a>
<a class="sourceLine" id="cb52-4" data-line-number="4">  <span class="dt">onclick =</span> <span class="st">&quot;alert(&#39;hello world&#39;)&quot;</span></a>
<a class="sourceLine" id="cb52-5" data-line-number="5">)</a></code></pre></div>
<p>Here is for example a small Shiny app that implements this behavior:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">library</span>(magrittr)</a>
<a class="sourceLine" id="cb53-3" data-line-number="3">ui &lt;-<span class="st"> </span><span class="cf">function</span>(request){</a>
<a class="sourceLine" id="cb53-4" data-line-number="4">  <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb53-5" data-line-number="5">    <span class="kw">plotOutput</span>(</a>
<a class="sourceLine" id="cb53-6" data-line-number="6">      <span class="st">&quot;plot&quot;</span></a>
<a class="sourceLine" id="cb53-7" data-line-number="7">    ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tagAppendAttributes</span>(</a>
<a class="sourceLine" id="cb53-8" data-line-number="8">      <span class="dt">onclick =</span> <span class="st">&quot;alert(&#39;iris plot!&#39;)&quot;</span></a>
<a class="sourceLine" id="cb53-9" data-line-number="9">    )</a>
<a class="sourceLine" id="cb53-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb53-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb53-12" data-line-number="12"></a>
<a class="sourceLine" id="cb53-13" data-line-number="13">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</a>
<a class="sourceLine" id="cb53-14" data-line-number="14">  output<span class="op">$</span>plop &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb53-15" data-line-number="15">    <span class="kw">plot</span>(iris)</a>
<a class="sourceLine" id="cb53-16" data-line-number="16">  })</a>
<a class="sourceLine" id="cb53-17" data-line-number="17">}</a>
<a class="sourceLine" id="cb53-18" data-line-number="18"></a>
<a class="sourceLine" id="cb53-19" data-line-number="19"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p>Real Life example : <a href="https://github.com/ColinFay/tidytuesday201942/blob/master/R/mod_dataviz.R#L109" class="uri">https://github.com/ColinFay/tidytuesday201942/blob/master/R/mod_dataviz.R#L109</a> and <a href="https://github.com/ColinFay/tidytuesday201942/blob/master/R/mod_dataviz.R#L305" class="uri">https://github.com/ColinFay/tidytuesday201942/blob/master/R/mod_dataviz.R#L305</a></p>
<p>That, of course, works well with very small JavaScript code.
For longer JavaScript code, you can write a function inside and external file, and add it to your app.
In <code>{golem}</code>, this works by launching the <code>add_js_file(&quot;name&quot;)</code>, which will create a <code>.js</code> file.
You’ll then need to add this function using the <code>tags$script(src=&quot;www/name.js&quot;)</code> inside the <code>golem_add_external_resources()</code> function in <code>R/app_ui.R</code> file.</p>
<p>This, for example, could be:</p>
<blockquote>
<p>inst/app/www/script.js</p>
</blockquote>
<div class="sourceCode" id="cb54"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw">function</span> <span class="at">alertme</span>(id)<span class="op">{</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2">  <span class="co">// Asking information</span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3">  <span class="kw">var</span> name <span class="op">=</span> <span class="at">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb54-4" data-line-number="4">  <span class="co">// Showing an alert</span></a>
<a class="sourceLine" id="cb54-5" data-line-number="5">  <span class="at">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! You&#39;re seeing &quot;</span> <span class="op">+</span> id)<span class="op">;</span></a>
<a class="sourceLine" id="cb54-6" data-line-number="6"><span class="op">}</span></a></code></pre></div>
<p>Then:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">plotOutput</span>(</a>
<a class="sourceLine" id="cb55-2" data-line-number="2">  <span class="st">&quot;plot&quot;</span></a>
<a class="sourceLine" id="cb55-3" data-line-number="3">) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tagAppendAttributes</span>(</a>
<a class="sourceLine" id="cb55-4" data-line-number="4">  <span class="dt">onclick =</span> <span class="st">&quot;alertme(&#39;plot&#39;)&quot;</span></a>
<a class="sourceLine" id="cb55-5" data-line-number="5">)</a></code></pre></div>
<p>Inside this <code>inst/app/www/script.js</code>, you can also attach a new behavior with jQuery to one or several elements.
For example, you can add this <code>alertme</code> / <code>onclick</code> behavior to all plots of the app:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="kw">function</span> <span class="at">alertme</span>(id)<span class="op">{</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2">  <span class="kw">var</span> name <span class="op">=</span> <span class="at">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb56-3" data-line-number="3">  <span class="at">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! You&#39;re seeing &quot;</span> <span class="op">+</span> id)<span class="op">;</span></a>
<a class="sourceLine" id="cb56-4" data-line-number="4"><span class="op">}</span></a>
<a class="sourceLine" id="cb56-5" data-line-number="5"></a>
<a class="sourceLine" id="cb56-6" data-line-number="6"><span class="co">/* We&#39;re adding this so that the function is launched only</span></a>
<a class="sourceLine" id="cb56-7" data-line-number="7"><span class="co">when the document is ready */</span></a>
<a class="sourceLine" id="cb56-8" data-line-number="8"><span class="at">$</span>(<span class="kw">function</span>()<span class="op">{</span> </a>
<a class="sourceLine" id="cb56-9" data-line-number="9">  <span class="co">// Selecting all Shiny plots</span></a>
<a class="sourceLine" id="cb56-10" data-line-number="10">  <span class="at">$</span>(<span class="st">&quot;.shiny-plot-output&quot;</span>).<span class="at">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>()<span class="op">{</span></a>
<a class="sourceLine" id="cb56-11" data-line-number="11">    <span class="co">/* Calling the alertme function with the id </span></a>
<a class="sourceLine" id="cb56-12" data-line-number="12"><span class="co">    of the clicked plot */</span></a>
<a class="sourceLine" id="cb56-13" data-line-number="13">    <span class="at">alertme</span>(<span class="kw">this</span>.<span class="at">id</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb56-14" data-line-number="14">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb56-15" data-line-number="15"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Then, all the plots from your app will receive this on click event<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a>.</p>
<p>Note that there is a series of <code>Shiny events</code>, which are specific to Shiny but that you can used as the one we’ve just seen:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">function</span> <span class="at">alertme</span>()<span class="op">{</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2">  <span class="kw">var</span> name <span class="op">=</span> <span class="at">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb57-3" data-line-number="3">  <span class="at">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! Welcome to my app&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb57-4" data-line-number="4"><span class="op">}</span></a>
<a class="sourceLine" id="cb57-5" data-line-number="5"></a>
<a class="sourceLine" id="cb57-6" data-line-number="6"><span class="at">$</span>(<span class="kw">function</span>()<span class="op">{</span> </a>
<a class="sourceLine" id="cb57-7" data-line-number="7">  <span class="co">// Waiting for Shiny to be connected</span></a>
<a class="sourceLine" id="cb57-8" data-line-number="8">  <span class="at">$</span>(document).<span class="at">on</span>(<span class="st">&#39;shiny:connected&#39;</span><span class="op">,</span> <span class="kw">function</span>(event) <span class="op">{</span></a>
<a class="sourceLine" id="cb57-9" data-line-number="9">    <span class="at">alertme</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb57-10" data-line-number="10">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb57-11" data-line-number="11"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>See <a href="https://shiny.rstudio.com/articles/js-events.html">JavaScript Events in Shiny</a> for the full list of JavaScript events available in Shiny.</p>
</div>
</div>
<div id="javascript---shiny-communication" class="section level2">
<h2><span class="header-section-number">18.3</span> JavaScript &lt;-&gt; Shiny communication</h2>
<p>Now that we’ve seen some client-side optimization, i.e. R doesn’t do anything with these events when they happen (in fact R is not even aware that they happen), let’s now see how we can make these two communicate with each other.</p>
<div id="from-r-to-javascript" class="section level3">
<h3><span class="header-section-number">18.3.1</span> From R to JavaScript</h3>
<p>Calling JS from the server side is done by defining a series of <code>CustomMessageHandler</code>: these are functions with one argument that can then be called using the <code>session$sendCustomMessage()</code> method from the server.</p>
<p>You can define them using this skeleton:</p>
<blockquote>
<p><code>golem::add_js_handler()</code></p>
</blockquote>
<p>Then, it will be called from server-side with:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">session<span class="op">$</span><span class="kw">sendCustomMessage</span>(<span class="st">&quot;fun&quot;</span>, <span class="kw">list</span>())</a></code></pre></div>
<p>Note that the <code>list()</code> argument from your function will be converted to JSON, and read as such from JS.
In other words, if your have an argument called <code>x</code>, and you call the function with <code>list(a = 1, b = 12)</code>, then in JS you’ll be able to use <code>x.a</code> and <code>x.b</code>.</p>
<p>For example:</p>
<blockquote>
<p>In <code>inst/app/www/script.js</code></p>
</blockquote>
<div class="sourceCode" id="cb59"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="va">Shiny</span>.<span class="at">addCustomMessageHandler</span>(<span class="st">&#39;computed&#39;</span><span class="op">,</span> <span class="kw">function</span>(mess) <span class="op">{</span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2">  <span class="at">alert</span>(<span class="st">&quot;Computed &quot;</span> <span class="op">+</span> <span class="va">mess</span>.<span class="at">what</span> <span class="op">+</span> <span class="st">&quot; in &quot;</span> <span class="op">+</span> <span class="va">mess</span>.<span class="at">sec</span> <span class="op">+</span> <span class="st">&quot; secs&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb59-3" data-line-number="3"><span class="op">}</span>)</a></code></pre></div>
<p>Then in R:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">observe</span>({</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">  deb &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb60-3" data-line-number="3">  <span class="co"># Do the computation for id</span></a>
<a class="sourceLine" id="cb60-4" data-line-number="4">  <span class="kw">Sys.sleep</span>(</a>
<a class="sourceLine" id="cb60-5" data-line-number="5">    <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb60-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb60-7" data-line-number="7">  session<span class="op">$</span><span class="kw">sendCustomMessage</span>(</a>
<a class="sourceLine" id="cb60-8" data-line-number="8">    <span class="st">&quot;computed&quot;</span>, </a>
<a class="sourceLine" id="cb60-9" data-line-number="9">    <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb60-10" data-line-number="10">      <span class="dt">what =</span> <span class="st">&quot;plop&quot;</span>, </a>
<a class="sourceLine" id="cb60-11" data-line-number="11">      <span class="dt">sec =</span> <span class="kw">round</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>deb)</a>
<a class="sourceLine" id="cb60-12" data-line-number="12">    )</a>
<a class="sourceLine" id="cb60-13" data-line-number="13">  )</a>
<a class="sourceLine" id="cb60-14" data-line-number="14">})</a></code></pre></div>
</div>
<div id="from-javascript-to-r" class="section level3">
<h3><span class="header-section-number">18.3.2</span> From JavaScript to R</h3>
<p>How to do the other way around (from JS to R)?
Shiny apps contain an object called <code>Shiny</code>, which can be used to send values to R, by creating an <code>IputValue</code>.
For example, with:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="va">Shiny</span>.<span class="at">setInputValue</span>(<span class="st">&quot;rand&quot;</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">random</span>())</a></code></pre></div>
<p>You’ll bind an input that can be caught from the server side with:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="kw">observeEvent</span>( input<span class="op">$</span>rand , {</a>
<a class="sourceLine" id="cb62-2" data-line-number="2">  <span class="kw">print</span>( input<span class="op">$</span>rand )</a>
<a class="sourceLine" id="cb62-3" data-line-number="3">})</a></code></pre></div>
<p>This <code>Shiny.setInputValue</code> can of course be used inside any JavaScript function.
Here is a small example wrapping some of the things we’ve seen previously:</p>
<blockquote>
<p>In <code>inst/app/www/script.js</code></p>
</blockquote>
<div class="sourceCode" id="cb63"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="kw">function</span> <span class="at">alertme</span>()<span class="op">{</span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2">  <span class="kw">var</span> name <span class="op">=</span> <span class="at">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb63-3" data-line-number="3">  <span class="at">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! Welcome to my app&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb63-4" data-line-number="4">  <span class="va">Shiny</span>.<span class="at">setInputValue</span>(<span class="st">&quot;username&quot;</span><span class="op">,</span> name)</a>
<a class="sourceLine" id="cb63-5" data-line-number="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb63-6" data-line-number="6"></a>
<a class="sourceLine" id="cb63-7" data-line-number="7"><span class="at">$</span>(<span class="kw">function</span>()<span class="op">{</span> </a>
<a class="sourceLine" id="cb63-8" data-line-number="8">  <span class="co">// Waiting for Shiny to be connected</span></a>
<a class="sourceLine" id="cb63-9" data-line-number="9">  <span class="at">$</span>(document).<span class="at">on</span>(<span class="st">&#39;shiny:connected&#39;</span><span class="op">,</span> <span class="kw">function</span>(event) <span class="op">{</span></a>
<a class="sourceLine" id="cb63-10" data-line-number="10">    <span class="at">alertme</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb63-11" data-line-number="11">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb63-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb63-13" data-line-number="13">  <span class="at">$</span>(<span class="st">&quot;.shiny-plot-output&quot;</span>).<span class="at">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>()<span class="op">{</span></a>
<a class="sourceLine" id="cb63-14" data-line-number="14">    <span class="co">/* Calling the alertme function with the id </span></a>
<a class="sourceLine" id="cb63-15" data-line-number="15"><span class="co">    of the clicked plot */</span></a>
<a class="sourceLine" id="cb63-16" data-line-number="16">    <span class="va">Shiny</span>.<span class="at">setInputValue</span>(<span class="st">&quot;last_plot_clicked&quot;</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">id</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb63-17" data-line-number="17">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb63-18" data-line-number="18"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>These events (getting the user name and the last plot clicked), can be caught from the server side with:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">observeEvent</span>( input<span class="op">$</span>username , {</a>
<a class="sourceLine" id="cb64-2" data-line-number="2">  cli<span class="op">::</span><span class="kw">cat_rule</span>(<span class="st">&quot;User name:&quot;</span>)</a>
<a class="sourceLine" id="cb64-3" data-line-number="3">  <span class="kw">print</span>(input<span class="op">$</span>username)</a>
<a class="sourceLine" id="cb64-4" data-line-number="4">})</a>
<a class="sourceLine" id="cb64-5" data-line-number="5"></a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="kw">observeEvent</span>( input<span class="op">$</span>last_plot_clicked , {</a>
<a class="sourceLine" id="cb64-7" data-line-number="7">  cli<span class="op">::</span><span class="kw">cat_rule</span>(<span class="st">&quot;Last plot clicked:&quot;</span>)</a>
<a class="sourceLine" id="cb64-8" data-line-number="8">  <span class="kw">print</span>(input<span class="op">$</span>last_plot_clicked)</a>
<a class="sourceLine" id="cb64-9" data-line-number="9">})</a></code></pre></div>
<p>Which will give:</p>
<pre><code>&gt; golex::run_app()
Loading required package: shiny

Listening on http://127.0.0.1:5495
── User name: ─────────────────────────────────────────────────────
[1] &quot;Colin&quot;
── Last plot clicked: ─────────────────────────────────────────────
[1] &quot;plot&quot;
── Last plot clicked: ─────────────────────────────────────────────
[1] &quot;plopt&quot;</code></pre>
<p><strong>Important note</strong>: if you’re using modules, you’ll need to pass the namespacing of the <code>id</code> to be able to get it back from the server.
This can be done using the <code>session$ns</code> function, which comes by default in any golem-generated module.
And as an example speaks more than a 1000 words, here is what we mean by that:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="at">$</span>( document ).<span class="at">ready</span>(<span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2">  <span class="va">Shiny</span>.<span class="at">addCustomMessageHandler</span>(<span class="st">&#39;whoareyou&#39;</span><span class="op">,</span> <span class="kw">function</span>(arg) <span class="op">{</span></a>
<a class="sourceLine" id="cb66-3" data-line-number="3">    <span class="kw">var</span> name <span class="op">=</span> <span class="at">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)</a>
<a class="sourceLine" id="cb66-4" data-line-number="4">    <span class="va">Shiny</span>.<span class="at">setInputValue</span>(<span class="va">arg</span>.<span class="at">id</span><span class="op">,</span> name)<span class="op">;</span></a>
<a class="sourceLine" id="cb66-5" data-line-number="5">  <span class="op">}</span>)</a>
<a class="sourceLine" id="cb66-6" data-line-number="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">mod_my_first_module_ui &lt;-<span class="st"> </span><span class="cf">function</span>(id){</a>
<a class="sourceLine" id="cb67-2" data-line-number="2">  ns &lt;-<span class="st"> </span><span class="kw">NS</span>(id)</a>
<a class="sourceLine" id="cb67-3" data-line-number="3">  <span class="kw">tagList</span>(</a>
<a class="sourceLine" id="cb67-4" data-line-number="4">    <span class="kw">actionButton</span>(</a>
<a class="sourceLine" id="cb67-5" data-line-number="5">      <span class="kw">ns</span>(<span class="st">&quot;showname&quot;</span>), <span class="st">&quot;Enter your name&quot;</span></a>
<a class="sourceLine" id="cb67-6" data-line-number="6">    )</a>
<a class="sourceLine" id="cb67-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb67-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb67-9" data-line-number="9"></a>
<a class="sourceLine" id="cb67-10" data-line-number="10">mod_my_first_module_server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</a>
<a class="sourceLine" id="cb67-11" data-line-number="11">  ns &lt;-<span class="st"> </span>session<span class="op">$</span>ns</a>
<a class="sourceLine" id="cb67-12" data-line-number="12">  <span class="kw">observeEvent</span>( input<span class="op">$</span>showname , {</a>
<a class="sourceLine" id="cb67-13" data-line-number="13">    session<span class="op">$</span><span class="kw">sendCustomMessage</span>(</a>
<a class="sourceLine" id="cb67-14" data-line-number="14">      <span class="st">&quot;whoareyou&quot;</span>, </a>
<a class="sourceLine" id="cb67-15" data-line-number="15">      <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb67-16" data-line-number="16">        <span class="dt">id =</span> <span class="kw">ns</span>(<span class="st">&quot;name&quot;</span>)</a>
<a class="sourceLine" id="cb67-17" data-line-number="17">      )</a>
<a class="sourceLine" id="cb67-18" data-line-number="18">    )</a>
<a class="sourceLine" id="cb67-19" data-line-number="19">  })</a>
<a class="sourceLine" id="cb67-20" data-line-number="20">  </a>
<a class="sourceLine" id="cb67-21" data-line-number="21">  <span class="kw">observeEvent</span>( input<span class="op">$</span>name , {</a>
<a class="sourceLine" id="cb67-22" data-line-number="22">    cli<span class="op">::</span><span class="kw">cat_rule</span>(<span class="st">&quot;Username is:&quot;</span>)</a>
<a class="sourceLine" id="cb67-23" data-line-number="23">    <span class="kw">print</span>(input<span class="op">$</span>name)</a>
<a class="sourceLine" id="cb67-24" data-line-number="24">  })</a>
<a class="sourceLine" id="cb67-25" data-line-number="25">}</a></code></pre></div>
</div>
</div>
<div id="about-golem-js-functions" class="section level2">
<h2><span class="header-section-number">18.4</span> About <code>{golem}</code> js functions</h2>
<p><code>{golem}</code> comes with a series of JavaScript functions that you can call from the server.
These functions are added by default with <code>golem::activate_js()</code> in <code>app_ui</code>.</p>
<p>Then they are called with <code>golem::invoke_js(&quot;function&quot;, &quot;element&quot;)</code>.</p>
<p>This <code>element</code> defines is a series of elements (most of the time scalar elements) that can be used to select the DOM node you need to interact with.
It can be a full jQuery selector, an id or a class.
Note that you can pass multiple elements, with <code>invoke_js</code> <code>...</code> parameters</p>
<div id="golemactivate_js" class="section level3">
<h3><span class="header-section-number">18.4.1</span> <code>golem::activate_js()</code></h3>
<ul>
<li><code>showid</code> &amp; <code>hideid</code>, <code>showclass</code> &amp; <code>hideclass</code> show and hide elements through their id or class.</li>
</ul>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">golem<span class="op">::</span><span class="kw">invoke_js</span>(<span class="st">&quot;showid&quot;</span>, <span class="kw">ns</span>(<span class="st">&quot;plot&quot;</span>))</a></code></pre></div>
<ul>
<li><code>showhref</code> &amp; <code>hidehref</code> hide and show a link by trying to match the <code>href</code> content.</li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">golem<span class="op">::</span><span class="kw">invoke_js</span>(<span class="st">&quot;showhref&quot;</span>, <span class="st">&quot;panel2&quot;</span>)</a></code></pre></div>
<ul>
<li><p><code>clickon</code> click on the element. You have to use the full jQuery selector.</p></li>
<li><p><code>show</code> &amp; <code>hide</code> show and hide elements, using the full jQuery selector.</p></li>
</ul>
<p>See <code>?golem::activate_js</code> for a full list of built-in functions.</p>
</div>
</div>
<div id="learn-more-about-javascript" class="section level2">
<h2><span class="header-section-number">18.5</span> Learn more about JavaScript</h2>
<p>Here is a list of external resources to learn more about JavaScript:</p>
<p>// TODO</p>

</div>
</div>































<div class="footnotes">
<hr />
<ol start="14">
<li id="fn14"><p>
This can also be done by wrapping a JS libraries inside a package, which will later be used inside an application.
See for example <a href="https://github.com/ColinFay/glouton"><code>{glouton}</code></a>, which is a wrapper around the <a href="https://github.com/js-cookie/js-cookie"><code>js-cookie</code></a> JavaScript library.<a href="optimjs.html#fnref14" class="footnote-back">↩</a></p></li>
<li id="fn15"><p>
You can now work with JavaScript in a server with Node.JS, but this is out of scope of this book.
See linked resources to learn more.<a href="optimjs.html#fnref15" class="footnote-back">↩</a></p></li>
<li id="fn16"><p>
This <code>click</code> behavior can also be done through <code>$(&quot;.shiny-plot-output&quot;).click(...)</code>.
We chose to display the <code>on(&quot;click&quot;)</code> pattern as it can be generalized to all DOM events.<a href="optimjs.html#fnref16" class="footnote-back">↩</a></p></li>
</ol>
</div>
<hr/>
<footer>
<a href="rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="optimizing-shiny-code.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/javascript.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
